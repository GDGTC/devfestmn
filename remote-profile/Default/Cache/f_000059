{"version":3,"file":"/ads/js/cn.dart.bun.min.js.map","sources":["?"],"names":["CN","isBoolean","mixed","isDate","Object","prototype","toString","call","isEmpty","str","test","isNull","isNumber","isFinite","isObject","isString","isUndefined","url","pathCache","domain","d","replace","location","hostname","split","dl","length","slice","join","section","pathname","match","isSecure","protocol","params","param","query","regex","result","utils","parseStr","search","path","getFragment","hash","substring","setFragment","value","this","cache","parsers","usercookie","$0","$1","$2","$3","uriencdec","encode","encodeURIComponent","decodeURIComponent","debug","eType","error","f","msg","warn","info","user","eEnv","DEV","STAG","PREV","PROD","show","type","args","t","site","env","console","func","unshift","i","part","splice","push","concat","firebug","apply","e","message","fileName","lineNumber","name","stack","speedtest","cycles","x","jQuery","isArray","isFunction","time","Math","floor","random","timeEnd","Date","log","alert","app","options","_show","setLevel","getLevel","code","title","alias","cnd","noads","testads","init","settings","s","hasOwnProperty","document","cookie","cookieCache","get","cookies","c","cl","delCache","del","expires","set","toUTCString","secure","frame","$","_resize","data","use","body","contentWindow","id","bind","eq","text","css","font-size","line-height","border","margin","height","overflow","outerHeight","bindResize","refresh","frames","resize","funcs","each","v","callwhen","run","src","triggerHandler","modules","customEvents","moduleLoaded","register","loaded","moduleName","window","trigger","googletag","cmd","gads","createElement","async","useSSL","node","getElementsByTagName","parentNode","insertBefore","ad","proximic","px","href","dart","$D","refreshState","$window","ads","gptAds","gptAdsBuilt","pageSlots","moreAdSlots","pageSlotsPlusInterstitial","refreshCalled","interstitialAdCnt","slideshowInterstitialAds","gptAdsRendered","common","charmap","container","dcopt","frameurl","embed","initialized","ready","pvid","sov","remote","retry","gptCallback","undefined","gptEvent","contentType","useOneAdCall","moat_isInteracting","contentId","etfThreshold","triggerEFT","etfCalledOnce","version","errors","interstitialDivCreated","warnings","dfpRefresh","maxDfpRefresh","adSeqTargeting","adSeqCap","socialKey","gptAdKey","tiles","tile","transparency","zone","configFile","configLoaded","configData","gptAdsParams","oneAdCallIInit","domDelay","defaultVal","deviceDefault","gptAdSlotSizes","desktop","728x90_topLargeDesktop","728x90_topDesktop","728x90_topArticle","728x90_topTablet","728x90_bannerTablet","728x90_bannerDesktop","728x90_top","728x90_bottom","728x90_nmtop","728x91_contentbody","728x92_contentbody","970x418_top","970x67_pushdown","300x250_side","300x250_sideArticle","300x250_boxDesktop","300x250_boxTablet","300x600_fullGalleryInterstitialTablet","300x600_inlineGalleryInterstitialTablet","300x600_interstitial_fullGalleryInterstitialTablet","300x600_interstitial_inlineGalleryInterstitialTablet","300x250_top","300x250_bottom","300x250_sponsor","300x250_instream","300x250_interstitial_top","300x250_interstitial_full","300x250_wmag","300x250_spot_c","300x250_left","300x250_infeed1","300x250_infeed2","300x250_infeed3","160x600_left","160x600_right","120x60_top","120x60_bottom","220x25_top","450x266_top","220x25_top_snap","220x25","1x1_top","3x1_top","4x1_top","948x461_top","180x150_top","300x200_top","165x31_top","460x608","320x50_top","320x51_bottom","300x250_takeover_mobile","300x50_bannerMobile","300x250_boxMobile","300x250_interstitial_boxMobile","300x250_fullGalleryInterstitialMobile","300x250_interstitial_fullGalleryInterstitialMobile","300x50_wwd_top","1300x250_top","1300x98_top","980x1100_top","88x32_top","wideDesktop","mobile","tablet","isURLHasKeywords","msg_pre","true","gen","queue","plug","valid","finished","drawing","drawn","config","false","timer","mark","milestone","getTime","messager","state","buildParams","cParams","paramStr","noKey","kws","defaultValue","pars","key","sz","containerName","isAdAlreadyCalled","description","divID","adSize","ind","adplacement","el","unique","store","isDrawn","xkws","adzone","collapse","dims","URIZone","adUnit3","adUnit4","uriParse","parseInt","adsAlreadyDrawn","adsize","adname","renderGPTAds","oopInterstitial","loadConfigFile","afterConfigInit","adKeywords","sponsorParameter","device","adUnits","unit1","unit2","unit3","unit4","event","creativeId","size","grabUrlKws","getTrackingSeq","docReferrer","addReferrer","getAdLogWin","socialReferrer","setOmnitureDFPVal","updateKws","plugin","viewableRefresh","refreshTimeMsec","setDartRefresh","dartRefresh","active","dartRefreshTimeMsec","minRefreshDurationMsec","startRefreshTimer","domDelayRender","val","setIntervalRenderAds","setInterval","renderAdsCalled","getGPTAds","trim","html","setGPTAdsRenderStatus","clearInterval","getDomDelay","checkMyDivPlease","moreAds","allAds","getMoreAdsCollection","extend","adArr","interstitialDim1","interstitialSize1","interstitialName1","interstitialPlacement1","prepend","pathName","referrer","socialArr","(^|\\.)facebook.com$","(^|\\.)twitter.com$","(^|\\.)reddit.com$","(^|\\.)pinterest.com$","(^|\\.)instagram.com$","(^|\\.)plus.url.google.com$","^t.co$","prop","setTimeout","eVar41","check","read","cook","remove","write","buildTracking","expInMin","commonVar","timeleft","setExpire","expirationTime","sqt","JSON","parse","Number","expire","count","stringify","setTargeting","obj","opt","targets","kw","CAP","arguments","pubads","rTime","refreshTime","overrides","cleanZone","maxRefreshes","inlineConfig","loadConfigProps","configFileURL","ajax","dataType","success","complete","siteData","prop2","prop3","prop4","isFinished","callbacks","unbind","len","position","scope","passed","validate","ret","pass","placement","startAutoRefreshTimer","minRefreshDuration","autoRefreshTime","lazyLoad","adSlots","placements","ind1","lazyDisplay","slot","round","refreshCounter","moreKws","arr","rVal","reserved","siteResolver","$val","$site","urlPat","zoneEnd","zonePat","RegExp","zoneResolver","map","kwResolver","addparam","add","p","pKey","pValue","sort","l","shift","clean_ws","remoteSite","remoteInit","embedScript","pushGPTAds","adSlot","defineOutOfPageSlot","addService","extra","adSlotArray","defineSlot","setCollapseEmptyDiv","keywords","lotameKeywords","aamUUID","indexOf","keywordPairs","slideshow","adKeys","collapseEmptyDivs","disableInitialLoad","enableSingleRequest","enableAsyncRendering","enableServices","addEventListener","enableETF","served","oneAdCall","opts","displayGPTAds","charAt","getRandomInt","min","max","enable","threshold","rndNum","trackETF","track","browserCheck","tem","N","navigator","appName","ua","userAgent","M","appVersion","markers","e0_id","e0_ec","e0_env","e0_sc","e0_ct","e0_tit","e0_sctn","e0_url","googletagEnable","targetKws","moreAdsSlotIndex","adUnit2","disableTracking","extraKws","display","slotIndex","moreAdsRefresh","myWindow","adlog","open","getAdLog","configFileData","innerHTML","buildSlots","inViewportFirstLoad","one","urlPath","delay","getGPTCustomParams","aamId","ctid","cttp","rfsh","scl","checkObj","retVal","renderedAds","addSize","addSlotArray","adEmpty","creativeID","linedItem","lineItemId","adLibVersion","ETFTriggered","masterAd","dfpParams","configFileLoaded","pageAdCalls","getSlideShowAds","status","getGPTAdsRenderStatus","refreshDynamicAd","props","getCommon","install","ipad","$CNd","suff","noiPadToDartSite","mobileSite","runPlugin","toLowerCase","moatListener","enableMoatRefresh","moatCondeListener","zMoatST","dartSignal","isInView","isInteracting","inView","on","suppression","npu","mbid","ars","plugins","polar","propertyID","secondaryPageUrl","article","label","elementId","template","infoText","infoButtonText","728x90_scaleDisplay","slideShowAdsRefresh","lazyThrottle","lazyOffset","viewableThreshold","slotSizes","aam","LIMIT","U_COOKIE","KW_COOKIE","uParams","buildUval","kwParams","buildVal","truncateStr","pos","limit","substr","lastIndexOf","buildUvalYieldex","uval","cookieVal","build","useYieldEx","requires","uvalue","aamskw","mod","modifies","req","curr","arsaccelerator","timeout","apiUrl","getData","parsely","canonical","parseJSON","attr","link","err","tags","topics","$CN","setTopic","drop","getTopic","kwExtend","setKws","transliterate","NATIVEADS","injectedAt","js","fjs","getElementById","configError","localConfig","enablePolarLogging","disablePolarTracker","$noop","noop","setDefaults","msgPre","injectPolar","onReady","dateFormatter","date","toLocaleDateString","toLocaleTimeString","setPropertyID","setSecondaryPageURL","logging","insert","insertPreview","dateFormat","adLabel","unit","server","elementID","compiledTemplate","onRender","onFill","onError","configureSecondaryPage","binding","sponsor","logo","summary","content","author","pubDate","image","caption","credits","secondaryPage","tmpl","pop","polarLocation","addKws","pxData","appendKws","refreshRate","poll","hiddenEvent","stopClock","startClock","returnRefreshDelay","zoneEnabled","configTooOld","callback","activeIgnoreSlots","timesFired","win","docElem","documentElement","adPlacements","lazyAdPlacements","timerId","firstTimeDelay","rectangle","width","buffer","r","getBoundingClientRect","h","w","top","left","bottom","right","viewportW","a","b","viewportH","inViewport","elem","coords","innerHeight","clientHeight","getRefreshTime","refreshInt","onFocusOverride","refreshAds","startTimer","lazyPoll","self","lazyload","off","handleScroll","removeEventListener","detachEvent","clearTimeout","stopTimer","handleVisibilityChange","bindVisibilityEvents","visibilityChange","hidden","mozHidden","msHidden","webkitHidden","timeLapsed","timeRemaining","onfocusout","evt","toElement","attachEvent","getPlacements","allowedSizes","allowedPlacements","isWinVisible","hasFocus","refreshPlacements","start","stop"],"mappings":"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","sourcesContent":["/*********************************************************\n* Site ars\n* BUNDLE cn.dart.js AssetBundle: default cn-fe-ads version = default\n* Configured plugins: aam,arsaccelerator,modifiers,polar,proximic,refresh\n* Minify flag = true\n* Include CN (cn.js) = true\n* ------------\n* OVERRIDES:\n* override version: undefined\n* override plugins = undefined\n*********************************************************/\n/*global CN, console, window, location, document, Option, jQuery, setTimeout, clearTimeout, clearInterval, setInterval */ /* for jsLint */\n\n/*\n * Conde Nast Digital Core JavaScript\n * @copyright   2008-2010 Conde Nast Digital except where specified. All rights reserved\n */\n\n/*\n    SECTION: CN CORE METHODS\n*/\n\n\nif (typeof CN === 'undefined' || !CN) {\n    /**\n     * CN global namespace object\n     * @namespace CN global namespace object\n     */\n    var CN = {};\n}\n\n\n/*\n    The following methods are located at the root of CN, because they\n    deal with primitives that jQuery does not identify. No other functions\n    should be placed at this level.\n*/\n\n\n/**\n * Determines whether or not the provided object is a boolean\n * @param  {mixed}   mixed  The object being testing\n * @return {boolean}        the result\n */\nCN.isBoolean = function(mixed) {\n    return typeof mixed === 'boolean';\n};\n\n/**\n * Determines whether or not the provided object is a date\n * @param  {mixed}   mixed  The object being tested\n * @return {boolean}        the result\n */\nCN.isDate = function(mixed) {\n    return Object.prototype.toString.call(mixed) === '[object Date]';\n};\n\n/**\n * Determines whether or not the provided string is empty\n * @param  {string}  str    The string being tested\n * @return {boolean}        the result\n */\nCN.isEmpty = function(str) {\n    return !/\\S/.test(str || '');\n};\n\n/**\n * Determines whether or not the provided object is null\n * @param  {mixed}   mixed  The object being testing\n * @return {boolean}        the result\n */\nCN.isNull = function(mixed) {\n    return mixed === null;\n};\n\n/**\n * Determines whether or not the provided object is a legal number\n * @param  {mixed}   mixed  The object being testing\n * @return {boolean}        the result\n */\nCN.isNumber = function(mixed) {\n    return typeof mixed === 'number' && isFinite(mixed);\n};\n\n/**\n * Determines whether or not the provided object is of type object\n * @param  {mixed}   mixed  The object being testing\n * @return {boolean}        the result\n */\nCN.isObject = function(mixed) {\n    return typeof mixed === 'object';\n};\n\n/**\n * Determines whether or not the provided object is a string\n * @param  {mixed}   mixed  The object being testing\n * @return {boolean}        the result\n */\nCN.isString = function(mixed) {\n    return typeof mixed === 'string';\n};\n\n/**\n * Determines whether or not the provided object is undefined\n * @param  {mixed}   mixed  The object being testing\n * @return {boolean}        the result\n */\nCN.isUndefined = function(mixed) {\n    return typeof mixed === 'undefined';\n};\n\n\n\n/*\n    SECTION: CN STATIC CLASSES\n*/\n\n\n/**\n * @class       CN URL Object\n * @description Contains methods for dealing with urls, query and hash params\n * @public\n * @author      Paul Bronshteyn\n * @author      Eric Shepherd\n */\nCN.url = (function() {\n    var\n        /**\n         * Path Cache Array.\n         * @memberOf    CN.url\n         * @private\n         * @type        object\n         */\n        pathCache = [];\n\n    /**\n     * @scope CN.url\n     */\n    return {\n        /**\n         * Retrieves domain name from the url in the form of domain.com\n         * @param   {string} [url]  Url to be parsed\n         * @return  {string}        domain.com\n         */\n        domain : function(url) {\n            var d = ((url) ? url.replace(/^https*:\\/\\/|(:|\\/).*$/g, '') : location.hostname).split('.'),\n                dl = d.length;\n            return d.slice(dl - 2, dl).join('.');\n        },\n\n        /**\n         * Retrieve current site section\n         * @return {string} Section name\n         */\n        section : function() {\n             return ((location.pathname.split('/')[1] || '').match(/^[^\\.]*$/) || [''])[0];\n        },\n\n        /**\n        * Returns url secure state\n        * @return {boolean}\n        */\n        isSecure: function() {\n            return location.protocol === 'https:';\n        },\n\n        /**\n         * Get query params as object of key, value pairs or a value of a param passed in.\n           If query is not provided, location.search will be used.\n           Result will be caches to queryCache variable for faster access on next call.\n         * @param   {string}        param     Parameter to lookup\n         * @param   {string}        query     Query string to parse\n         * @param   {string}        regex     String key representing regular expression in parsers object\n         * @return  {object|string}\n         */\n        params : function(param, query, regex) {\n            var result = CN.utils.parseStr((query || location.search), (regex || 'query'));\n            return (param) ? result[param] || '' : result;\n        },\n\n        /**\n         * Retrive current site path\n         * @return {array} Path\n         */\n        path : function() {\n            if (pathCache.length === 0) {\n                pathCache = location.pathname.match(/([^\\/]+)/g) || ['']; // remove leading and trailing slash.\n            }\n            return pathCache;\n        },\n\n        /**\n         * Retrieve the URL fragment identifier\n         * @return {string|boolean} fragment id\n         */\n        getFragment : function() {\n            return location.hash.substring(1) || false;\n        },\n\n        /**\n         * Sets the fragment identifier string\n         */\n        setFragment : function(value) {\n            location.hash = value || '';\n            return this;\n        }\n    };\n})();\n\n\n/**\n * @class           CN Utilities\n * @description     Collection of utility helper functions\n * @public\n * @author          Paul Bronshteyn\n * @author          Eric Shepherd\n */\nCN.utils = (function() {\n    var\n        /**\n         * Cache object.\n         * @description Contains result objects for all parsed string using parseStr function.\n         * @memberOf    CN.utils\n         * @private\n         * @type        object\n         */\n        cache = {},\n\n        /**\n         * Regular expression parsers\n         * @memberOf    CN.utils\n         * @private\n         * @type        object\n         */\n        parsers = {\n            /**\n             * Query, hash parser expression.\n             * @description Will parse a url string in the form of ?var=value&var1=value#hash=value&hash1=value1 into\n                            key value pair object.\n             * @memberOf    CN.utils\n             * @private\n             * @type        RegEx expression\n             */\n            query : /([^?=&]+)(=([^&]*))?/g,\n\n            /**\n             * Hash parser expression.\n             * @description Will parse url hash string in the form of\n                            ?var=value&var1=value into key value pair object.\n             * @memberOf CN.utils\n             * @private\n             * @type RegEx expression\n             */\n            hash : /([^#=&]+)(=([^&]*))?/g,\n\n            /**\n             * User cookie hash parser expression.\n             * @description  Will parse a cookie value in the form of var=value|var1=value|var2=value into\n                             key value pair object.\n             * @memberOf     CN.utils\n             * @private\n             * @type         RegEx expression\n             */\n            usercookie : /([^=|]+)(=([^|]*))?/g\n        },\n\n        /**\n         * Takes an argument and a goal length and prepends or appends\n           padding character to reach that length.\n         * @param {string} str A number or string representing a number\n         * @param {integer} total A length to make the return string\n         * @param {string} padding A number or string to pad with\n         * @param {string} dir Direction to pad on\n         * @return {string} Padded string\n         */\n        pad = function(str, total, padding, dir) {\n            str     = String(str || '');\n            padding = String(padding || ' ');\n\n            var strLen = str.length,\n                padLen = padding.length;\n\n            if (strLen >= total) {\n                return str;\n            }\n\n            while (strLen < total) {\n                str = (dir === 'left') ? padding + str : str + padding;\n                strLen += padLen;\n            }\n\n            return str;\n        };\n\n    /**\n     * @scope CN.utils\n     */\n    return {\n        /**\n         * Parse string using a regular expression and return object of key, value pairs.\n         * @param   {string}    query   Query to be parsed\n         * @param   {string}    regex   String key representing regular expression in parsers object\n         * @return  {object}            Result object of key, value pairs\n         */\n        parseStr : function(str, regex) {\n            if (cache[str+\"_\"+regex]) {\n                return cache[str+\"_\"+regex];\n            }\n            cache[str+\"_\"+regex] = {};\n\n            (str || '').replace(parsers[regex], function($0, $1, $2, $3) {\n                cache[str+\"_\"+regex][$1] = $3;\n            });\n\n            return cache[str+\"_\"+regex];\n        },\n\n       \n\n        /**\n         * URI encode/decode a string\n         * @private\n         * @param {string} str String to encoded or decoded\n         * @param {boolean} [encode] Will encode if set to true, otherwise decode\n         * @return {string} Encoded or decoded string\n         */\n        uriencdec : function(str, encode) {\n            return (encode) ? encodeURIComponent(str) : decodeURIComponent(str);\n        },\n\n    };\n})();\n\n\n/**\n * CN Debug Object\n * @requires    jQuery\n * @class       CN Debug Object\n * @public\n * @constructor\n * @author      Paul Bronshteyn\n */\nCN.debug = (function() {\n    var\n        /**\n         * Log Types (error, warn, info, user)\n         * @memberOf    CN.debug\n         * @private\n         * @type        object\n         */\n        eType = {\n            error : { f: 'error', msg: 'ERROR' },\n            warn  : { f: 'warn',  msg: 'WARNING' },\n            info  : { f: 'info',  msg: 'INFO' },\n            user  : { f: 'error', msg: 'USER' }\n        },\n\n        /**\n         * Log Types (DEV, STAG, PREV, PROD)\n         * @memberOf    CN.debug\n         * @private\n         * @type        object\n         */\n        eEnv = {\n            DEV  : 'Development',\n            STAG : 'Staging',\n            PREV : 'Preview',\n            PROD : 'Production'\n        },\n\n        /**\n         * Shows error information in console or alert\n         * @memberOf    CN.debug\n         * @private\n         * @param       {string}    type    Error Type\n         * @param       {string}    msg     Error message\n         * @param       {array}     [args]  Error details\n         */\n        show = function(type, msg, args) {\n            var t = eType[type] || eType.debug;\n\n            if (CN.site.env === 'PROD' && !CN.site.debug) {\n                return;\n            }\n\n            msg = msg || 'NO MSG';\n            args = args || [];\n\n            if (typeof console === 'object') {\n                var func = console[t.f] || console.info;\n\n                args.unshift(t.msg, msg);\n\n                for (var i = 0; i < args.length - 1; i += 2) {\n                    var part = args.splice(0, i + 1);\n                    part.push(' :: ');\n                    args = part.concat(args);\n                }\n\n                if (console.firebug) {\n                    func.apply(this, args);\n                } else {\n                    console[t.f](args);\n                }\n            }\n        };\n\n        if (CN.url.params(\"debugOff\") === 'true') {\n            show = function() { return; };\n        }\n\n    /**\n     * @scope CN.debug\n     */\n    return {\n        /**\n         * Log error messages\n         * @param   {string}    msg     Error message\n         * @param   {array}     [args]  Error details\n         */\n        error : function(msg, args) {\n            show('error', msg, args);\n            return this;\n        },\n\n        /**\n         * Log warning messages\n         * @param   {string}    msg     Warning message\n         * @param   {array}     [args]  Warning details\n         */\n        warn : function(msg, args) {\n            show('warn', msg, args);\n            return this;\n        },\n\n        /**\n         * Log info messages\n         * @param   {string}    msg     Info message\n         * @param   {array}     [args]  Info details\n         */\n        info : function(msg, args) {\n            show('info', msg, args);\n            return this;\n        },\n\n        /**\n         * Log Try/Catch messages\n         * @param   {object}        e Error object\n         * @param   {array} [args]  Error details\n         */\n        user : function(e, args) {\n            show('user', e.message, [args, e.fileName, e.lineNumber, e.name, e.stack]);\n            return this;\n        },\n\n        /**\n         * Speed test your function\n         * @param   {function|string}   f           Function name or it's string representation\n         * @param   {array}             [args]      Arguments that will be passed to the function\n         * @param   {integer}           [cycles]    How many cycles to run the test (default 10000)\n         * @return  {console|alert}                 Prints time in ms in console in FF,Safari,Chrome and alert() on IE\n         */\n        speedtest : function(f, args, cycles) {\n            var x, i;\n\n            if (CN.isNumber(args)) {\n                cycles = args;\n                args = [];\n            }\n\n            if (!jQuery.isArray(args)) {\n                args = [];\n            }\n\n            cycles = cycles || 10000;\n\n            if (!jQuery.isFunction(f)) {\n                CN.debug.error('Not a function', [f]);\n                return this;\n            }\n\n            if (typeof console === 'object') {\n                if (console.time) {\n                    x = 'timer' + Math.floor(Math.random() * 1000000);\n                    console.time(x);\n                    for (i = 0; i < cycles; i++) {\n                        f.apply(this, args);\n                    }\n                    console.timeEnd(x);\n                } else {\n                    x = new Date() - 0;\n                    for (i = 0; i < cycles; i++) {\n                        f.apply(this, args);\n                    }\n                    x = new Date() - x;\n                    console.log(x);\n                }\n            } else {\n                x = new Date() - 0;\n                for (i = 0; i < cycles; i++) {\n                    f.apply(this, args);\n                }\n                x = new Date() - x;\n                alert(x);\n            }\n\n            return this;\n        },\n\n        /**\n         * CN Application Debug Object\n         * @class       CN Application Debug Object\n         * @constructor\n         * @public\n         * @author      Paul Bronshteyn\n         */\n        app : function() {\n            var\n                /**\n                 * Holds setLevel options\n                 * @memberOf    CN.debug.app\n                 * @private\n                 * @type        object\n                 */\n                options = {},\n\n                /**\n                 * Shows error information in console or alert.\n                 * @description     Uses setLevel options to display or supress error messages.\n                                    Calls parent show() method if setLevel options match\n                 * @memberOf        CN.debug.app\n                 * @link            CN.debug.show\n                 * @private\n                 * @param           {string}    type    Error Type\n                 * @param           {string}    msg     Error message\n                 * @param           {array}     [args]  Error details\n                 */\n                _show = function(type, msg, args) {\n                    if (options[CN.site.env][type]) {\n                        show(type, msg, args);\n                    }\n                };\n\n            /**\n             * @scope CN.debug.app\n             */\n            return {\n                /**\n                 * Set Levels of debuging messages\n                 * @param   {array}     type    Log Types (error, warn, info, debug, user)\n                 * @param   {string}    [env]   Enviroment (DEV, STAG, PREV, PROD)\n                 */\n                setLevel : function(type, env) {\n                    if (!type || !jQuery.isArray(type) || type.length === 0) {\n                        return this;\n                    }\n                    env = (env && env in eEnv) ? env : 'DEV';\n                    options[env] = type;\n                    return this;\n                },\n\n                /**\n                 * Get Levels of debuging messages\n                 * @param   {string}        [env]   Enviroment (DEV, STAG, PREV, PROD)\n                 * @return  {object|array}          If enviroment not provided returns reporting object, if provided levels array\n                 */\n                getLevel : function(env) {\n                    return (env) ? options[env] || '' : options;\n                },\n\n                /**\n                 * Log error messages\n                 * @link    CN.debug.error\n                 * @param   {string}    msg     Error message\n                 * @param   {array}     [args]  Error details\n                 */\n                error : function(msg, args) {\n                    _show('error', msg, args);\n                    return this;\n                },\n\n                /**\n                 * Log warning messages\n                 * @link    CN.debug.warn\n                 * @param   {string}    msg     Warning message\n                 * @param   {array}     [args]  Warning details\n                 */\n                warn : function(msg, args) {\n                    _show('warn', msg, args);\n                    return this;\n                },\n\n                /**\n                 * Log info messages\n                 * @link    CN.debug.info\n                 * @param   {string}    msg     Info message\n                 * @param   {array}     [args]  Info details\n                 */\n                info : function(msg, args) {\n                    _show('info', msg, args);\n                    return this;\n                },\n\n                /**\n                 * Log Try/Catch messages\n                 * @link    CN.debug.user\n                 * @param   {object}    e       Error object\n                 * @param   {array}     [args]  Error details\n                 */\n                user : function(e, args) {\n                    _show('user', e.message, [args, e.fileName, e.lineNumber, e.name, e.stack]);\n                    return this;\n                }\n            };\n        }\n    };\n})();\n\n\n/**\n * CN Site Object\n * @class    CN Site Object\n * @public\n * @author   Paul Bronshteyn\n */\nCN.site = (function() {\n    /** @scope CN.site */\n    return {\n        /**\n         * Site code\n         * @type string\n         */\n        code : '',\n\n        /**\n         * Site title\n         * @type string\n         */\n        title : '',\n\n        /**\n         * Site name - Lower cased title\n         * @type string\n         */\n        name : '',\n\n        /**\n         * Site alias - Upper case title\n         * @type string\n         */\n        alias: '',\n\n        /**\n         * Site environment\n         * @type string\n         */\n        env : '',\n\n        /**\n        * Site CND Request\n        * @type boolean\n        */\n        cnd: false,\n\n        /**\n         * Site debug.\n         * @description If set will console debug messages in any enviroment.\n                        Use query parameter magdebug to toggle debuger.\n         * @type boolean\n         */\n        debug : !!CN.url.params('magdebug') && !this.cnd,\n\n        /**\n         * Site no ads.\n         * @description If set will disable ad calls on the page.\n         * @type boolean\n         */\n        noads : !!CN.url.params('magnoads') && !this.cnd,\n\n        /**\n         * Test ads.\n         * @description If not empty we will use this as dart site and zone\n         * @type String\n         */\n        testads : CN.url.params('dartAdOverride') && !this.cnd,\n\n        /**\n         * Initiate site specific object, sets document.domain\n         * @param {object} settings S\n         * @type function\n         */\n        init : function(settings) {\n            settings = settings || {};\n            for (var s in settings) {\n                if (settings.hasOwnProperty(s)) {\n                    this[s] = settings[s];\n                }\n            }\n\n            /**\n             * @name        CN.site#dynamicName\n             * @description Dynamically generated site object based on the name of the site.\n                            All site specific code will be in this object.\n             * @memberOf    CN.site\n             * @type        object\n             * @example     CN.site.glamour\n             */\n            this[this.name] = {};\n\n            this.domain = CN.url.domain();\n\n            try {\n                if (this.domain) {\n                    document.domain = this.domain;\n                }\n                CN.debug.info('Document domain was set', [this.domain]);\n            } catch(e) {\n                CN.debug.error(e);\n            }\n\n            CN.debug.info('CN Started', [this.code, this.title, this.env, this.name, this.alias, this.cnd, this.debug, this.noads]);\n\n            return this;\n        }\n    };\n})();\n\n\n/*********************************************************************************************************************\n The above namespaces need to be in the order listed\n All namespaces below will follow in alphabetical order\n*********************************************************************************************************************/\n\n\n\n/**\n * @class    CN Cookie\n * @public\n * @author   Paul Bronshteyn\n */\nCN.cookie = (function() {\n    var\n        /**\n         * Cookie Cache Object.\n         * @description     Contains all the cookies parsed on the page.\n         * @memberOf        CN.cookie\n         * @private\n         * @type            object\n         */\n        cookieCache = {};\n\n    /**\n     * @scope CN.cookie\n     */\n    return {\n        /**\n         * Get the value of a cookie with the given name.\n         * @param   {string}    name   Cookie name\n         * @return  {string}            Cookie value\n         *\n         * @example\n             Get the value of a cookie:\n             CN.cookie.get('the_cookie');\n         */\n        get : function(name) {\n            if (cookieCache[name]) {\n                return cookieCache[name];\n            }\n\n            var cookies = document.cookie.split('; '),\n                cookie  = [],\n                c       = 0,\n                cl      = cookies.length;\n\n            for (; c < cl; c++) {\n                cookie = cookies[c].split('=');\n                cookieCache[cookie[0]] = decodeURIComponent(cookie.slice(1).join('='));\n                if (cookie[0] === name) {\n                    return cookieCache[cookie[0]];\n                }\n            }\n\n            this.delCache(name);\n            return '';\n        },\n\n        /**\n        * Delete the cookie with the given name.\n        * @param {string} name Cookie name\n        * @param {object} [options] Cookie options\n        *\n        * @example\n            Delete the cookie:\n            CN.cookie.del('the_cookie');\n\n            Delete the cookie set with path:\n            CN.cookie.del('the_cookie', { path: '/' });\n        */\n        del : function(name, options) {\n            options = options || {};\n            options.expires = -1;\n            return this.set(name, '', options);\n        },\n\n        /**\n         * Create a cookie with the given name and value and other optional parameters.\n         * @param   {string}    name        Cookie name\n         * @param   {string}    [value]     Cookie value\n         * @param   {object}    [options]   Cookie options\n         *\n         * @example\n             Create or set the value of a cookie:\n             CN.cookie.set('the_cookie', 'the_value');\n\n             Create a cookie with all available options:\n             CN.cookie.set('the_cookie', 'the_value', { expires: 7, path: '/', domain: 'condenast.com', secure: true });\n\n             Delete the cookie:\n             CN.cookie.set('the_cookie', '', { expires: -1 });\n         */\n        set : function(name, value, options) {\n            this.delCache(name);\n\n            options = options || {};\n            value = value || '';\n            options.expires = CN.isDate(options.expires) ? options.expires.toUTCString() : CN.isNumber(options.expires) ? (new Date(+(new Date) + options.expires * 60 * 60 * 1000)).toUTCString() : ''; // TODO: fails jslint - second new Date needs ()?\n\n            var cookie = [name + '=' + encodeURIComponent(value)];\n\n            if (options.expires) {\n                cookie.push('expires=' + options.expires);\n            }\n            if (options.path) {\n                cookie.push('path=' + options.path);\n            }\n            if (options.domain) {\n                cookie.push('domain=' + options.domain);\n            }\n            if (options.secure) {\n                cookie.push('secure');\n            }\n\n            return document.cookie = cookie.join('; '), cookieCache[name] = value, true; // TODO: crashes jslint with assignment operator in return\n        },\n\n        delCache: function(name) {\n            delete cookieCache[name];\n            return this;\n        }\n    };\n})();\n\n\n/**\n * @class        CN Frame\n * @description  Contains methods for dealing with iFrames.\n * @public\n * @requires     jQuery\n * @author       Paul Bronshteyn\n */\nCN.frame = (function($) {\n    var\n        /**\n         * Resize iFrame height to fit content on load.\n         * @description This is a private function that is triggered by the onload\n                        event of the iFrame. This will also be triggered by the\n                        public resize method.\n         * @memberOf    CN.frame\n         * @private\n         * @event\n         */\n        _resize = function(e) {\n            var frame = (e.data && e.data.use) ? e.data.use : this;\n\n            try {\n                var body = frame.contentWindow.document.body;\n            } catch(e) {\n                return CN.debug.user(e, [frame, frame.id]);\n            }\n\n            if (typeof e.data === 'undefined') {\n                $('iframe', body).bind('load', { use: frame }, _resize);\n            }\n\n            if (!$('.textAd', body).length || !$('#adHolder a', body).eq(0).text()) {\n                $('#adHolder', body).css({ 'font-size': 0, 'line-height': 0 });\n            }\n\n            $(frame).css({\n                border : 'none',\n                margin : 0,\n                height : $(body).css({ overflow: 'hidden', margin: 0, border: 0 }).outerHeight()\n            });\n        };\n\n    /**\n     * @scope CN.frame\n     */\n    return {\n        /**\n         * Bind iFframe resize on iFrame load.\n         * @description     Binds the load event to the element passed in.\n         * @param           {string}    frame   ID or class of the iFrame in jQuery excepted format.\n         * @uses            CN.frame._resize\n         *\n         * @example\n             Using element id:\n             CN.frame.bindResize('#frame_id');\n\n             Using element class:\n             CN.frame.bindResize('.frame_class');\n\n             Using multiple and combinations:\n             CN.frame.bindResize('#frame_id, .frame_class');\n         */\n        bindResize : function(frame) {\n            $(frame).bind('load', _resize);\n            return this;\n        },\n\n        /**\n         * Refresh iFrame\n         * @description Refreshes an iFrame with the current url or with the url if the\n                        param (if provided), resizes the frame onload to fit content.\n         * @param       {string,array}  frames      Array, CSV or space-delimitted list of iframe\n                                                    classes or ids or mixed\n         * @param       {string}        [url]       Url for the iFrame(s) to be refreshed with, defaults to\n                                                    refreshing current iFrame url\n         * @param       {boolean}       [resize]    Resize iFrame after refresh, default is true\n         * @uses        CN.frame._resize\n         *\n         * @example\n             Refresh iFrame:\n             CN.frame.refresh('#frame_id');\n\n             Refresh multiple iFrames (comma-separated):\n             CN.frame.refresh('#frame_id,.frame1,#frame2');\n\n             Refresh multiple iFrames (space-separated):\n             CN.frame.refresh('#frame_id .frame1 #frame2');\n\n             Refresh iFrame with url:\n             CN.frame.refresh('#frame_id', 'http://www.example.com');\n\n             Refresh iFrame with url and do not resize:\n             CN.frame.refresh('#frame_id', 'http://www.example.com', false);\n         */\n        refresh : function(frames, url, resize, funcs) {\n            frames = (CN.isString(frames)) ? frames.split(/,|\\s+/) : ($.isArray(frames)) ? frames : [];\n            // frames array empty? exit\n            if (!frames.length) {\n                return this;\n            }\n\n            // shift arguments if resize was ommited\n            if(CN.isObject(resize)){\n                funcs=resize,resize=true;\n            }\n\n            // shift arguments if url and resize were ommited\n            if(CN.isObject(url)){\n                funcs=url,url='';\n            }\n\n            // shift arguments if url was ommited\n            if (CN.isBoolean(url)) {\n                resize = url;\n                url = '';\n            }\n\n            // NOTE: == is intentional and checks for values that are null or undefined\n            resize = (resize == null) ? true : resize;\n\n            // update each frame\n            $.each(frames, function(i, v) {\n                if (!/\\S/.test(v)) {\n                    return true;\n                }\n\n                var frame = $(v);\n                if (!frame.length) {\n                    return true;\n                }\n\n                // bind load event\n                if (resize) {\n                    frame.bind('load', _resize);\n                }\n\n                //execute callbefore, and bind callafter\n                CN.callwhen.run(funcs,frame);\n\n                url = url || frame[0].src;\n\n                // load url provided or refresh\n                // adblock extension throws error, catch it, kill it\n                try {\n                    frame[0].contentWindow.location.replace(url);\n                    CN.debug.info('CN Frame Refresh', [v, url, resize]);\n                } catch(e) {\n                    CN.debug.user(e, [v, url, resize]);\n                }\n            });\n\n            return this;\n        },\n\n        /**\n         * Resize iFrame height to fit content.\n         * @description     Binds the load event to the element passed in and then triggers it.\n         * @param           {string}    frame   ID or class of the iFrame in jQuery excepted format.\n         * @uses            CN.frame._resize\n         *\n         * @example\n             Using element id:\n             CN.frame.resize('#frame_id');\n\n             Using element class:\n             CN.frame.resize('.frame_class');\n\n             Using multiple and combinations:\n             CN.frame.resize('#frame_id, .frame_class');\n         */\n        resize : function(frame) {\n            $(frame).bind('load', _resize).triggerHandler('load');\n            return this;\n        }\n    };\n})(jQuery);\n\n/**\n * @class       CN.modules\n * @description Holds page module APIs and provides methods for interacting with modules\n * @public\n * @author      Eric Shepherd\n */\nCN.modules = (function() {\n    CN.customEvents = CN.customEvents || {};\n    CN.customEvents.moduleLoaded = {};\n\n    var register,\n        loaded = [];\n\n    register = function(moduleName) {\n        CN.modules.loaded.push(moduleName);\n        jQuery(window).trigger('CN.customEvents.moduleLoaded.' + moduleName);\n    };\n\n    return {\n        register : register,\n        loaded   : loaded\n    }\n})();\n\n\n\n/*global CN, jQuery */ /* for jsLint */\n\n/**\n * CN.dart.js\n * @library cn-fe-ads-4.15.1\n * @requires CN, jQuery\n * @author Russell Munson\n * @author Joe Hartoularos\n * @author Robert Sethi\n * @author Tobias Wright\n */\n\nvar googletag = window.googletag = window.googletag || {};\nwindow.googletag.cmd = window.googletag.cmd || [];\n\n(function() {\nvar gads = document.createElement(\"script\");\ngads.async = true;\ngads.type = \"text/javascript\";\nvar useSSL = \"https:\" == document.location.protocol;\ngads.src = (useSSL ? \"https:\" : \"http:\") + \"//www.googletagservices.com/tag/js/gpt.js\";\nvar node =document.getElementsByTagName(\"script\")[0];\nnode.parentNode.insertBefore(gads, node);\n})();\n\nCN.ad = window.CN.ad || {};\nCN.ad.proximic = CN.ad.proximic || {};\n\n(function() {\nvar px = document.createElement(\"script\");\npx.async = true;\npx.type = \"text/javascript\";\nvar useSSL = \"https:\" == document.location.protocol;\npx.src = (useSSL ? \"https:\" : \"http:\") + \"//segment-data.zqtk.net/conde-nast\" + '?url=' + encodeURIComponent(window.location.href);\nvar node =document.getElementsByTagName(\"script\")[0];\nnode.parentNode.insertBefore(px, node);\n})();\n\nCN.dart = window.CN.dart = (function($, CN, $D) {\n\n    var\n\n        /**\n         * {Object} $window\n         * A jQuery wrapped set of the window object.  Saves rendering time.\n         * @private\n         */\n        $window = $(window),\n\n        /**\n         * {Object} ads\n         * A collection of ad calls requested on CN.dart\n         * @private\n         */\n        ads = {},\n\n        /**\n         * {Array} gptAds\n         * A collection of GPT ad calls requested on CN.dart\n         * @private\n         */\n        gptAds = [],\n\n        gptAdsBuilt = false,\n\n        pageSlots = [],\n\n        moreAdSlots = [],\n\n        pageSlotsPlusInterstitial = [],\n\n        refreshCalled = false,\n\n        interstitialAdCnt = 0,\n\n        refreshState,\n\n        /**\n         * {Object} slideshowInterstitialAds\n         * Slideshow Interstitial Ads called for the site\n         * @private\n         */\n        slideshowInterstitialAds = {},\n\n        /**\n         * {Boolean} gptAdsRendered\n         * Flag to check whether the ads are loaded during Page loading time to differentiate ads from after page load call\n         * @private\n         */\n        gptAdsRendered = false,\n\n        /**\n         * {Object} common\n         * The common ad object.  Used as a base class for plugin methods for easy read/write access to\n         * shared ad values.\n         * @private\n         */\n        common = {\n            ad              : {},\n            params          : {},\n            charmap         : {},\n            container       : '_frame',                         /*  Individual ad container div suffix */\n            dcopt           : true,                             /*  allow dcopt param to be appended to tile 1 */\n            frameurl        : '/ads/newad.html',                /*  Iframe base-url - Used for generating contained dynamic script tags for ad calls. */\n            embed           : false,                            /*  If set to true, embed ads in page rather than in an iframe */\n            initialized     : false,\n            ready           : false,\n            pvid            : (Math.floor(Math.random()*10e12)).toString(),\n            sov             : (Math.floor((Math.random() * 20) + 1)).toString(),\n            remote          : '/services/dart/',\n            retry           : false,\n            gptCallback     : undefined,\n            gptEvent        : [],\n            contentType     : \"\",\n            useOneAdCall    : false,\n            moat_isInteracting  : false,\n            contentId       : \"\",\n            etfThreshold    : 0,\n            triggerEFT      : false,\n            etfCalledOnce   : false,\n            version         : \"4.15.1\",\n            errors          : [],\n            interstitialDivCreated : false,\n            warnings        : [],\n            dfpRefresh      : \"0\",                              /*  Counter for reporting ad refresh */\n            maxDfpRefresh   : 100,                              /*  @ 100 refreshes we stop counting for reporting */\n            adSeqTargeting  : \"1\",\n            adSeqCap        : \"1\",\n            socialKey       : \"\",\n            site            : \"\",\n            gptAdKey        : 3379,\n            tiles           : [],\n            tile            : 0,\n            transparency    : true,                             /*  allowtransparency to fix white background on ads in IE */\n            url             : location.protocol + '//ad.doubleclick.net/adj/',\n            zone            : \"\",\n            configFile      : '/ads/cn.dartconfig.js',           /*  dart config file */\n            configLoaded    : false,\n            configData      : {},\n            gptAdsParams    : {},\n            oneAdCallIInit  : false,\n            domDelay        : {\"defaultVal\" : 1000},\n            deviceDefault   : \"desktop\",\n            gptAdSlotSizes  : {\n                                \"desktop\" : {\n                                    \"728x90_topLargeDesktop\"    : [[728, 90], [970, 66], [970, 418], [970, 250], [1140, 380], [970, 90]],\n                                    \"728x90_topDesktop\"         : [[728, 90], [970, 66], [970, 418], [970, 250], [900, 300], [970, 90]],\n                                    \"728x90_topArticle\"         : [[728, 90], [970, 66], [970, 418], [970, 90]],\n                                    \"728x90_topTablet\"          : [[728, 90], [690, 230]],\n                                    \"728x90_bannerTablet\"       : [[728, 90]],\n                                    \"728x90_bannerDesktop\"      : [[728, 90]],\n                                    \"728x90_top\"                : [[728, 90], [970, 418], [970, 250], [980, 300], [970, 90], [970, 66], [62, 88], [88, 31], [196, 31], [2048, 1534]],\n                                    \"728x90_bottom\"             : [[728, 91]],\n                                    \"728x90_nmtop\"              : [[728, 90], [865,165], [1300, 250], [970, 250], [970, 66]],\n                                    \"728x91_contentbody\"        : [[728, 91], [2048, 1535]],\n                                    \"728x92_contentbody\"        : [[728, 92], [2048, 1536]],\n                                    \"970x418_top\"               : [[970, 418], [970, 250], [980, 300], [970, 90], [970, 66], [728, 92], [88, 31], [62, 88], [196, 31], [1140, 380], [900,300] ],\n                                    \"970x67_pushdown\"           : [[728, 92], [970,67], [970, 419], [970, 251], [970, 91], [62, 89], [88, 32], [196, 32], [1140, 380], [900,300]],\n                                    \"300x250_side\"              : [[300, 250], [300, 600], [300, 1050]],\n                                    \"300x250_sideArticle\"       : [[300, 250], [300, 600]],\n                                    \"300x250_boxDesktop\"        : [[300, 250]],\n                                    \"300x250_boxTablet\"         : [[300, 250]],\n                                    \"300x600_fullGalleryInterstitialTablet\"        : [[300, 600], [640, 900]],\n                                    \"300x600_inlineGalleryInterstitialTablet\"      : [[300, 250], [630, 639]],\n                                    \"300x600_interstitial_fullGalleryInterstitialTablet\"        : [[300, 600], [640, 900]],\n                                    \"300x600_interstitial_inlineGalleryInterstitialTablet\"      : [[300, 250], [630, 639]],\n                                    \"300x250_top\"               : [[300, 250], [300, 600], [300, 1050]],\n                                    \"300x250_bottom\"            : [[300, 251], [300, 601], [300, 1051]],\n                                    \"300x250_sponsor\"           : [[300, 250], [300, 600]],\n                                    \"300x250_instream\"          : [[300, 255], [300, 605], [300, 1055]],\n                                    // GQ Kittyhawk slideshows can serve 3 sizes for insterstitial slideshow ad\n                                    \"300x250_interstitial_top\"  : [[300, 252], [300, 602], [440, 330], [620, 440], [900, 600], [832, 380]],\n                                    \"300x250_interstitial_full\" : [[300, 252], [640, 480], [1280, 960]],\n                                    \"300x250_wmag\"              : [[300, 250], [300, 600], [610, 730]],\n                                    \"300x250_spot_c\"            : [[300, 253]],\n                                    \"300x250_left\"              : [[300, 254], [300, 604]],\n                                    \"300x250_infeed1\"           : [[300, 250], [610, 300]],\n                                    \"300x250_infeed2\"           : [[300, 251], [610, 301]],\n                                    \"300x250_infeed3\"           : [[300, 252], [610, 302]],\n                                    \"160x600_left\"              : [[160, 600], [200, 700], [300, 900]],\n                                    \"160x600_right\"             : [[160, 601], [200, 701], [300, 901]],\n                                    \"120x60_top\"                : [[120, 60]],\n                                    \"120x60_bottom\"             : [[120, 61]],\n                                    \"220x25_top\"                : [[220, 25]],\n                                    // Start Epi-specific placements.\n                                    \"450x266_top\"               : [[450, 266]],\n                                    \"220x25_top_snap\"           : [[230, 96]],\n                                    \"220x25\"                    : [[230, 96]],\n                                    \"1x1_top\"                   : [[1, 1]],\n                                    \"3x1_top\"                   : [[447,100],[3, 1]],\n                                    \"4x1_top\"                   : [[4, 1]],\n                                    \"948x461_top\"               : [[948, 461]],\n                                    \"180x150_top\"               : [[180, 150]],\n                                    \"300x200_top\"               : [[300, 200]],\n                                    \"165x31_top\"                : [[165, 31]],\n                                    // Blog\n                                    \"460x608\"                   : [[460, 608],[460, 150]],\n                                    // Mobile placements - copying to mobile parameter, will remain here for backward compatibility\n                                    \"320x50_top\"                : [[300, 50], [320, 50], [300, 150], [320, 150], [300, 259]],\n                                    \"320x51_bottom\"             : [[300, 51], [320, 51], [300, 151], [320, 151], [300, 251], [300, 601]],\n                                    \"300x250_takeover_mobile\"   : [[300, 250], [320, 250], [320, 480]],\n                                    \"300x50_bannerMobile\"       : [[300, 50]],\n                                    \"300x250_boxMobile\"         : [[300, 250]],\n                                    \"300x250_interstitial_boxMobile\"         : [[300, 250]],\n                                    \"300x250_fullGalleryInterstitialMobile\"          : [[300, 250], [320, 480]],\n                                    \"300x250_interstitial_fullGalleryInterstitialMobile\"          : [[300, 250], [320, 480]],\n                                    // WWD Mobile placements\n                                    \"300x50_wwd_top\"            : [[300, 50], [300, 250]],\n                                    //Style specific placements\n                                    \"1300x250_top\"              : [[1300, 250]],\n                                    \"1300x98_top\"               : [[1300, 98]],\n                                    \"980x1100_top\"              : [[980, 1100]],\n                                    //Self\n                                    \"88x32_top\"                 : [[88, 32]]\n                                },\n                                \"wideDesktop\" : {},\n                                \"mobile\" : {\n                                    \"320x50_top\"                : [[300, 50], [320, 50], [300, 150], [320, 150], [300, 259]],\n                                    \"320x51_bottom\"             : [[300, 51], [320, 51], [300, 151], [320, 151], [300, 251], [300, 601]],\n                                    \"300x250_takeover_mobile\"   : [[300, 250], [320, 250], [320, 480]],\n                                    \"300x50_bannerMobile\"       : [[300, 50]],\n                                    \"300x250_boxMobile\"         : [[300, 250]],\n                                    \"300x250_interstitial_boxMobile\"         : [[300, 250]],\n                                    \"300x250_fullGalleryInterstitialMobile\"          : [[300, 250], [320, 480]],\n                                    \"300x250_interstitial_fullGalleryInterstitialMobile\"          : [[300, 250], [320, 480]],\n                                    // WWD Mobile placements\n                                    \"300x50_wwd_top\"            : [[300, 50], [300, 250]]\n                                },\n                                \"tablet\" : {}\n                            },\n            isURLHasKeywords: false\n        },\n\n        /**\n         * {RegExp} kwregex\n         * @private\n         */\n        kwregex = /kw=/g,\n\n        /**\n         * {String} msg_pre\n         * Shared message prefix used in generating debug info.\n         * @private\n         */\n        msg_pre = \"CN Ad \",\n\n        /**\n         * {Object} msg\n         * Message object for easily generating debug info.\n         * @private\n         */\n        msg = {\n            /* These are for good! */\n            'true' : {\n                gen      : 'Success',\n                call     : 'Request Fired',\n                embed    : 'Set to Embedded Mode.  Operating with degraded feature-set.',\n                queue    : 'Request Added to Queue',\n                plug     : 'Plugin Registered',\n                valid    : 'Plugin Action Passed Validation',\n                finished : 'All Plugins Finished Running.',\n                drawing  : 'All Ads Have Completed Drawing',\n                drawn    : 'Ad Drawn',\n                config   : 'Config file found'\n\n            },\n\n            /* These are for bad =( */\n            'false' : {\n                gen      : 'Error',\n                call     : 'Request Aborted',\n                embed    : 'Set to Iframe Mode. Good job.',\n                queue    : 'Request Faled To Be Added to Queue',\n                plug     : 'Plugin Skipped',\n                valid    : 'Plugin Action Failed Validation',\n                finished : 'Plugins Still Running',\n                drawing  : 'Ads Still Drawing',\n                drawn    : 'Ad Failed To Draw',\n                config   : 'Config file not found'\n            }\n        },\n\n        /**\n         * {Object} timer\n         * A timer object used to record function performance.\n         * @public\n         */\n        timer = {\n            /**\n             * Marks a point in execution by creating a timestamp.  The value of milestone dictates the key.\n             * The milestone 'start' is used as the initial timestamp.  All other timestamps are stored as\n             * a difference to show the time in miliseconds each function call has taken from start.\n             * @param {String}    milestone     A string denoting the milestone key\n             * @example:\n             *                 timer.mark('start');  // Creates a timestamp stored in timer.start\n             *                 timer.mark('init');   // Creates a timestamp, then stores the difference of start and init in timer.init\n             * @private\n             */\n            mark : function(milestone) {\n                        this[milestone] = (milestone === 'start') ? (new Date()).getTime() : (new Date()).getTime() ;\n            }\n        },\n\n        /**\n         * Generates debug messages.\n         * @param {String}    type       Message type defined in @msg\n         * @param {Boolean}   [state]    Optional Boolean value to indicate state [true = success, false = error]\n         * @returns {String} A formatted debug message\n         * @private\n         */\n        messager = function(type, state) {\n            return msg_pre + msg[(state !== false).toString()][type || 'gen'];\n        },\n\n        /**\n         * Formats key=value string of params to add to the ad url.  Iterates over common.params, using the default value\n         * or calling refresh on the param object if the value of the param is dependent on something volatile (i.e. keywords).\n         * If the param has an property named \"noKey\" then just inject the defaultValue into the string.\n         * @param {Object}    ad         DART ad object\n         * @returns {String} Formatted key=value string\n         * @private\n         */\n        buildParams = function(ad) {\n\n            var\n                cParams  = common.params,\n                paramStr = '',\n                param;\n\n            for (param in cParams) {\n                if (cParams.hasOwnProperty(param)) {\n                    // No key params don't need a key value. Also they should go before all other normal params.\n                    if (!cParams[param].noKey) {\n                        paramStr += param + '=';\n                        paramStr += (cParams[param].refresh && (ad.kws.length !== common.ad.kws.length)) ? cParams[param].refresh(ad) : cParams[param].defaultValue;\n                    } else {\n                        paramStr = (cParams[param].refresh && (ad.kws.length !== common.ad.kws.length)) ? cParams[param].refresh(ad) : cParams[param].defaultValue + paramStr;\n                    }\n\n                }\n            }\n\n            return paramStr;\n        },\n\n        /**\n         * Creates and stores individual ad objects by extending the base common.ad.\n         * @param {String}    name        Unique name prefix for storage, container div, and iframe id generation\n         * @param {Object}    [pars]      Additional ad params to extend or override common.ad values\n         * @returns {CN.dart}\n         * @public\n         */\n        call = function(name, pars) {\n            var key = name + pars.sz,\n                containerName = key+\"_frame\",\n                isAdAlreadyCalled = false;\n\n            // Check for the valid call params\n            if( (name === \"\") ){\n                common.errors.push({ \"description\" : \"Missing ad div id in CN.dart.call()\",\n                                    \"divID\" : name || \"undefined\",\n                                    \"adSize\" : pars.sz || \"undefined\",\n                                    \"kws\" : pars.kws || \"undefined\"\n                                } );\n                return;\n            };\n\n            // Check for the duplicate ad call\n            if(gptAdsRendered === false){\n                for(var ind=0; ind<gptAds.length; ind++){\n                    if(gptAds[ind].adplacement === containerName){\n                        isAdAlreadyCalled = true;\n                        break;\n                    }\n                }\n            }\n\n            // Check if the Ad calls are called during the rendering time\n            if(isAdAlreadyCalled === false || gptAdsRendered === true){\n                var ad  = ads[key] = {\n                        tile        : common.tiles.push(key),\n                        el          : $('#' + key + common.container),\n                        kws         : unique(common.ad.kws, test.kws(pars.kws) || []),\n                        store       : pars.store === false ? false : common.ad.store,\n                        sz          : pars.sz,\n                        isDrawn     : false,\n                        xkws        : test.kws(pars.kws) || [],\n                        zone        : pars.zone ? test.adzone(pars.zone) : false,\n                        collapse    : pars.collapse === true\n                    },\n                    dims = ad.sz.split('x'),\n                    URI = (location.pathname && location.pathname !== \"/\") ? location.pathname : \"\",\n                    URIZone = (common.zone) ? common.zone.replace(/;/gi, \"/\") : \"\",\n                    adUnit3 = (common.adUnit3) ? common.adUnit3.replace(/;/gi, \"/\") : undefined,\n                    adUnit4 = (common.adUnit4) ? common.adUnit4.replace(/;/gi, \"/\") : undefined;\n\n                if(URIZone){\n                    URIZone = uriParse(URIZone, adUnit3, adUnit4);\n                }\n\n                // Push the Dimensions after converting them\n                for(var ind=0; ind<dims.length; ind++){\n                    dims[ind] = parseInt(dims[ind], 10);\n                }\n\n                // Set for slideshow interstitial ads\n                if(gptAdsRendered === true){\n                    var adsAlreadyDrawn = false;\n\n                    if(slideshowInterstitialAds.drawn === true){\n                        adsAlreadyDrawn = true\n                    }\n\n                    slideshowInterstitialAds =  {\n                                                    \"url\" : \"/\"+ common.gptAdKey +\"/\"+ common.site + URIZone,\n                                                    \"adsize\" : dims,\n                                                    \"adname\" : key,\n                                                    \"adplacement\" : containerName,\n                                                    \"tiles\" : ad.tile,\n                                                    \"kws\" : ad.kws,\n                                                    \"drawn\" : adsAlreadyDrawn,\n                                                    \"xkws\" : ad.xkws\n                                                };\n\n                    CN.dart.renderGPTAds();\n                } else {\n\n                    // Push the GPT Ads data into array\n                    gptAds.push({\n                            \"url\" : \"/\"+ common.gptAdKey +\"/\"+ common.site + URIZone,\n                            \"adsize\" : dims,\n                            \"adname\" : key,\n                            \"adplacement\" : containerName,\n                            \"tiles\" : ad.tile,\n                            \"kws\" : ad.kws,\n                            \"drawn\" : false,\n                            \"xkws\" : ad.xkws\n                        });\n\n                    //Out of Page Interstitial\n                    oopInterstitial(ad, URIZone, \"gptAds\");\n                }\n\n            }\n\n            return this;\n        },\n\n        /**\n         * Initialize CN.dart,\n         * @param {Object}  pars    Shared params - ex: site, zone, shared kws.\n         * @public\n         */\n        init = function(pars) {\n            if (common.initialized) {\n                $D.warn(msg_pre+'Initialization called more than once.  This should only happen once per page.');\n                return false;\n            }\n\n            timer.mark('startInit');\n\n            loadConfigFile(pars);\n\n        },\n\n        /**\n         * Initialize CN.dart, setting common ad parameters and kicking off all registered plug-ins.\n         * Added new logic per AdOps - if kw=[some keyword] is present in the url then override common.ad.kws with this one\n         * this was causing sponsorship ads to content with normal page ads\n         * @param {Object}  pars    Shared params - ex: site, zone, shared kws.\n         * @public\n         */\n        afterConfigInit = function(pars){\n\n            var sponsorParameter = (common.configLoaded && common.configData.sponsorParameter) ? common.configData.sponsorParameter : ['kw'],\n                adKeywords;\n\n            test.charmap(pars.charmap);\n\n            common.device = (pars.device) ? pars.device : common.deviceDefault;\n\n            common.initialized = true;\n\n            common.site = (pars.adUnits) ? pars.adUnits.unit1 : pars.site;\n            common.zone = (pars.adUnits) ? test.adzone(pars.adUnits.unit2) : test.adzone(pars.zone);\n            common.adUnit3 = (pars.adUnits) ? ( (typeof pars.adUnits.unit3 === \"undefined\") ? undefined : test.adzone(pars.adUnits.unit3) ) : undefined;\n            common.adUnit4 = (pars.adUnits) ? ( (typeof pars.adUnits.unit4 === \"undefined\") ? undefined : test.adzone(pars.adUnits.unit4) ) : undefined;\n\n            common.contentId = pars.contentId;\n            common.contentType = pars.contentType;\n\n            common.useOneAdCall = pars.useOneAdCall || false;\n\n            common.gptCallback = (pars.gptCallback && (typeof pars.gptCallback === 'function') ) ? pars.gptCallback :  function(event) {$D.info('Cid: ' + event.creativeId + ' is rendered to slot of size: ' + event.size[0] + 'x' + event.size[1]); };\n\n            adKeywords = grabUrlKws(sponsorParameter,pars);\n\n            getTrackingSeq();\n\n            common.ad   = {\n                store   : true,\n                kws     : adKeywords,\n                tile    : common.tile\n            };\n\n            if( common.configLoaded && common.configData.docReferrer ){\n                addReferrer()\n            };\n\n            if (CN.url.params(\"getAdLog\", location.search)) {\n                getAdLogWin();\n            }\n\n            socialReferrer();\n            setOmnitureDFPVal();\n\n            updateKws();\n            plugin.run();\n\n\n            if(common.configLoaded && common.configData.refresh ){\n                if(typeof CN.ad.viewableRefresh === \"undefined\"){\n                    $D.info(msg_pre + 'Refresh plugin not installed', []);\n                }\n\n                if(common.configData.refresh.type && common.configData.refresh.type === \"auto\"){\n                    if(common.configData.refresh.refreshTimeMsec > 0)\n                        setDartRefresh( common.configData.refresh.refreshTimeMsec );\n                    }\n\n\n                } else if(common.configLoaded && common.configData.dartRefresh ){\n                    if(typeof common.configData.dartRefresh.active !== \"undefined\" ){\n                        if(common.configData.dartRefresh.dartRefreshTimeMsec > 0 ) {\n                            setDartRefresh( common.configData.dartRefresh.dartRefreshTimeMsec );\n                        }\n                    }\n            }\n\n            if(common.configData.minRefreshDurationMsec && typeof common.configData.minRefreshDurationMsec !== \"undefined\") {\n                common.startRefreshTimer = (new Date()).getTime();\n            }\n\n            common.embed = (pars.embed || common.embed);\n\n            if (common.embed) {\n                $D.info(messager('embed', true), []);\n            }\n\n            timer.mark('init');\n\n            $D.info(msg_pre + 'Initialized', [ads]);\n\n            domDelayRender(common.useOneAdCall);\n\n            $window.trigger('CN.customEvents.dartInitialized');\n\n\n        },\n\n        domDelayRender = function(val){\n            // if common.useOneAdCall == true. Don'ts use jQuery callback\n            if (!val) {\n                $D.info(\" CN dart using call() \", [{}]);\n\n                jQuery(function(){\n                    var setIntervalRenderAds = setInterval(function(){\n                        var renderAdsCalled = false,\n                            gptAds = CN.dart.getGPTAds();\n\n                        for(var ind=0; ind<gptAds.length; ind++){\n\n                           var el = jQuery(\"#\"+ jQuery.trim(gptAds[ind].adplacement));\n                           if( !(gptAds[ind].adplacement === 'interstitial1x1_frame') ) {\n                                if(el.length > 0 && el.html() === \"\"){\n                                    renderAdsCalled = true;\n                                    break;\n                                };\n                            };\n                        }\n\n                        if(renderAdsCalled === true){\n                            CN.dart.renderGPTAds();\n                        } else {\n                            CN.dart.setGPTAdsRenderStatus(true);\n                            clearInterval(setIntervalRenderAds);\n                            jQuery(window).trigger('CN.customEvents.GPTAdsRendered');\n                        }\n                    }, CN.dart.getDomDelay());\n                });\n            } else {\n                $D.info(\" CN dart using oneAdCall() \", [{}]);\n            };\n        },\n\n        checkMyDivPlease = function(){\n            var gptAds,\n                moreAds,\n                allAds,\n                renderedAds = {},\n                ind = 0;\n\n            gptAds = CN.dart.getGPTAds();\n            moreAds = CN.dart.getMoreAdsCollection();\n            allAds = $.extend( moreAds ,gptAds);\n\n            for(; ind<allAds.length; ind++){\n\n                if( $(\"#\" + allAds[ind].adplacement).length === 0){\n\n                    timer.mark('div_missing_' + allAds[ind].adplacement);\n\n                    common.errors.push({ \"description\" : \"Missing ad div\",\n                        \"divID\" : allAds[ind].adplacement || \"undefined\"\n                    } );\n\n                };\n            };\n        },\n\n        oopInterstitial = function(ad, URIZone, adArr){\n\n            var interstitialDim1 = [1,1],\n                interstitialSize1 = interstitialDim1[0] +\"x\"+ interstitialDim1[1],\n                interstitialName1 = \"interstitial\"+ interstitialSize1,\n                interstitialPlacement1 = interstitialName1 +\"_frame\";\n\n            //Only create div if not present\n            if( $(\"#\"+ interstitialPlacement1).length === 0 && !common.interstitialDivCreated){\n                $(\"body\").prepend('<div id=\"'+ interstitialPlacement1 +'\" class=\"displayAd displayAd'+ interstitialSize1 +'Js\" style=\"width:'+ interstitialDim1[0]+'px;height: 0px;\" data-cb-ad-id=\"'+ interstitialPlacement1 +'\"></div>');\n\n                common.interstitialDivCreated = true;\n                common.warnings.push({ \"description\" : \"Ad library created 1x1 interstitial div\",\n                    \"divID\" : \"interstitial1x1_frame\",\n                    \"adSize\" : \"1x1\",\n                    \"kws\" :  \"\"\n                } );\n            }\n\n            if(adArr === \"gptAds\"){\n                // Push for intersitial Ads\n                if(gptAds.length === 1 ){\n\n                    gptAds.push({\n                        \"url\" : \"/\"+ common.gptAdKey +\"/\"+ common.site + URIZone,\n                        \"adsize\" : interstitialDim1,\n                        \"adname\" : interstitialName1,\n                        \"adplacement\" : interstitialPlacement1,\n                        \"tiles\" : ad.tile,\n                        \"kws\" : ad.kws,\n                        \"drawn\" : false,\n                        \"xkws\" : ad.xkws\n                    });\n                }\n            };\n\n        },\n\n       /* Detects if referrer is a recognized social network\n        * and passes it as a scl key to DFP.. scl = fb\n        */\n        socialReferrer = function(){\n            var val,\n                socialKey,\n                pathName = document.referrer.match(/([^\\/]+)/g) || [''],\n                socialArr = {\n                    \"(^|\\\\.)facebook.com$\"  : \"fb\",\n                    \"(^|\\\\.)twitter.com$\"   : \"tw\",\n                    \"(^|\\\\.)reddit.com$\"    : \"rd\",\n                    \"(^|\\\\.)pinterest.com$\" : \"pn\",\n                    \"(^|\\\\.)instagram.com$\" : \"ig\",\n                    \"(^|\\\\.)plus.url.google.com$\" : \"gpl\",\n                    \"^t\\.co$\"          : \"tw\"\n                };\n\n            val = pathName[1];\n\n            if(typeof val !== \"undefined\"){\n                for(prop in socialArr){\n                    if( val.match(prop) !== null ){\n                        common.socialKey = socialArr[prop];\n                    }\n                }\n            };\n       },\n\n       /* Sets eVar41 with pvid for Burt\n        */\n       setOmnitureDFPVal = function(){\n        setTimeout(function(){\n            if(typeof s === \"object\"){\n                s.eVar41 = common.pvid;\n            }\n        }, 200)\n\n       },\n\n\n\n        /**\n         * Adds document.referrer keyword to kws\n         * This was added for JIRA:AA-21\n         *\n         * @private\n         */\n        addReferrer = function() {\n            // remove leading and trailing slash.\n            var  pathName = document.referrer.match(/([^\\/]+)/g) || [''],\n                 val = pathName[pathName.length-1];\n\n            //Remove any parameters in url, otherwise they get passed in kws\n            if (val) {\n                val = val.replace(/\\?.*$/g, '').replace(\".html\", \"\", \"gi\");\n                common.ad.kws[common.ad.kws.length] = \"\" + test.kws(\"rfr_\"+ val);\n            }\n\n        },\n\n        /**\n         * Sequentially targeting ads to a user\n         * Set cookies to track user movement\n         *\n         * @private\n         */\n        cookie = {\n\n            options : {\n               domain:CN.url.domain(),\n               path:'/'\n            },\n\n            check : function( name ){\n                return CN.cookie.get( name );\n            },\n\n            read : function( name ){\n                var cook=cookie.check( name );\n                return cook !==\"\" ?\n                    cook :\n                    false;\n            },\n\n            remove : function( name ){\n                CN.cookie.del( name, cookie.options )\n            },\n\n            write : function(name, pars, expires){\n                cookie.options.expires = expires;\n\n                CN.cookie.set( name, pars, cookie.options);\n            }\n        },\n\n        /**\n         * Builds the tracking and sets the cookie\n         * to track user movement\n         *\n         * @param  {String}    name         name of the cookie being set or retrieved\n         * @param  {number}    expInMin     Length of time for the cookie in minutes\n         *                                  Does not support session setting\n         * @param  {String}    commonVar    name of the property in the common object\n         *\n         * @public\n         */\n        buildTracking = function( name, expInMin, commonVar ) {\n            var\n                sqt = {},\n                data = cookie.read( name ),\n                timeleft,\n                setExpire,\n                expirationTime;\n\n            if (!data) {\n\n                expirationTime = expInMin * (1000 * 60);\n                timeleft = new Date().getTime() + expirationTime;\n\n                sqt.count = Number(common[commonVar]);\n                sqt.expire = timeleft;\n\n                setExpire = expInMin / 60\n\n                sqt = JSON.stringify(sqt);\n\n                cookie.write( name, sqt, setExpire );\n            } else {\n\n                if (!commonVar) {\n                    if (name === \"cn_adsqt\") {\n                        commonVar = \"adSeqTargeting\";\n                    } else if (name === \"cn_adcap\") {\n                        commonVar = \"adSeqCap\"\n                    } else {\n                        $D.warn('There is no ads tracking cookie: '+name);\n                        common.warnings.push('There is no ads tracking cookie: '+name);\n                    }\n                }\n\n                sqt = JSON.parse( cookie.check( name ) );\n\n                timeleft = Number(sqt.expire) - new Date().getTime();\n                setExpire = timeleft / (1000 * 60 * 60);\n\n                sqt.count = Number(sqt.count) + 1;\n                common[commonVar] = '' + sqt.count;\n\n                sqt = JSON.stringify(sqt);\n\n                cookie.write( name, sqt, setExpire );\n            };\n        },\n\n\n         /**\n         * Gets the tracking for reporting and sets the cookies up\n         *\n        * @private\n         */\n        getTrackingSeq = function() {\n\n            buildTracking( \"cn_adsqt\", 1380, \"adSeqTargeting\" );\n            buildTracking( \"cn_adcap\", 10, \"adSeqCap\" );\n        },\n\n         /**\n         * Sets up targeting and updates the Adlog\n         * @param  {object}  \"obj\"          Accepts objext with trget name and value, or just the name, which requires opt\n         * @param  \"string\"  \"string\"       Value of target name\n         *\n         * @example     setTargeting({\n         *                  kw: targetKws,\n         *                  contentId: common.contentId,\n         *                   contentType: contentType\n         *                  })\n         *              CN.dart.refresh(\"contentType\", \"allo\");\n         *\n         * @private\n         */\n        setTargeting = function( obj, opt ) {\n            var name,\n                targets = {\n                    kw: \"kw\",\n                    contentId: \"ctid\",\n                    contentType: \"cttp\",\n                    dfpRefresh: \"rfsh\",\n                    adSeqTargeting: \"sqt\",\n                    CAP: \"CAP\",\n                    socialKey: \"scl\",\n                    pvid: \"pvid\"\n                }\n\n            if(arguments.length > 1) {\n                googletag.pubads().setTargeting( obj, opt );\n\n                for (var prop in targets) {\n                    if ( targets[prop] === obj ) {\n                        common[ prop ] = opt;\n                    }\n                }\n\n            } else {\n                for (var prop in obj) {\n                    name = targets[prop] ? targets[prop] : prop;\n\n                    googletag.pubads().setTargeting( name, obj[prop]);\n\n                    if (common[ prop ] !== undefined) {\n                        common[ prop ] = obj[prop];\n                    }\n                }\n            }\n        },\n\n        /**\n         * Adds ad refresh\n         * Calls CN.dart.refresh() based on dartConfig.json file setting\n         *\n         * @private\n         */\n        setDartRefresh = function(rTime) {\n            var refreshTime = rTime;\n\n            //Overriding the zone refresh\n            if (typeof common.configData.overrides !== \"undefined\" ){\n                if (typeof common.configData.overrides.refresh !== \"undefined\" ){\n                    if (typeof common.configData.overrides.refresh.zone !== \"undefined\" ){\n                        var cleanZone = common.zone.replace(/[^\\w\\s]/gi, '');\n\n                        for( prop in common.configData.overrides.refresh.zone){\n                           //If zones match then override refresh time\n                           if (cleanZone === prop ){\n                                refreshTime = common.configData.overrides.refresh.zone[prop].dartRefreshTimeMsec;\n                           };\n                        };\n                    };\n                };\n            };\n\n            if (refreshTime){\n                refreshState = setInterval( function(){\n                        //Halts the refresh is there is a maxRefresh\n                        if (common.configData.maxRefreshes && typeof common.configData.maxRefreshes !== \"undefined\") {\n                            if ( Number(common.dfpRefresh) >= common.configData.maxRefreshes ) {\n                                clearInterval( refreshState );\n                                $D.info(msg_pre + 'Max refreshes reached. Stopping refresh', []);\n                                return;\n                            }\n                        }\n\n                        CN.dart.refresh();\n                        $D.info(msg_pre + 'Refreshed ', []);\n\n                    }, refreshTime);\n\n                $D.info(msg_pre + 'Refresh Initialized to ' + refreshTime + 'ms', []);\n            };\n        },\n\n        /**\n         * Checks for dartConfig file on server and consumes json data into common\n         * Should be in same location as iframe busters /ads/dartConfig.json\n         * @private\n         */\n        loadConfigFile = function(pars) {\n\n            if(CN.dart.inlineConfig){\n                loadConfigProps(CN.dart.inlineConfig);\n                afterConfigInit(pars);\n                 $D.info(msg_pre + 'inline dartConfig loaded', []);\n                return;\n            };\n\n            var configFileURL = (pars.configFile) ? pars.configFile : common.configFile;\n\n            $.ajax({\n                url         : configFileURL,\n                dataType    : \"json\",\n                async       : false,\n                error       : function()\n                {\n                    //file not exists\n                    $D.info(messager('config',false), []);\n                    common.configLoaded = false;\n                },\n                cache       : true,\n                success     : function(data)\n                {\n                    //file exists\n                    loadConfigProps(data);\n                },\n                complete    : function(){\n                    $D.info(msg_pre + 'dartConfig call complete', []);\n                    afterConfigInit(pars);\n\n                }\n            });\n\n        },\n\n        /**\n         * Parses config file and sets common properties\n         * @param {Object}    data   Site entry\n         * @private\n         */\n         loadConfigProps = function(data){\n            var siteData = data[CN.site.name];\n\n            if ( siteData ) {\n                //Loop thru config keys\n                for( prop in siteData){\n                    //Add the keys to common.configData\n                    common.configData[prop] = siteData[prop];\n                    //If key is object then we are overriding defaults\n                    if (typeof siteData[prop] === \"object\" && siteData[prop] !== null){\n                        //Now we are in sub object , loop here\n                        for( prop2 in siteData[prop]){\n                            if (typeof siteData[prop][prop2] === \"object\" && siteData[prop][prop2] !== null){\n                                //here we overide defaults\n                                for( prop3 in siteData[prop][prop2]){\n                                    //if size mapping overrides is set\n                                    if ( prop2 === \"gptAdSlotSizes\") {\n                                        //If there is no device, then defaults to desktop\n                                        if ( Object.prototype.toString.call(siteData[prop][prop2][prop3]) == \"[object Array]\" && siteData[prop][prop2][prop3] !== null ) {\n                                            if (typeof common[prop2] === \"undefined\" ){\n                                                common[prop2][common.deviceDefault] = {};\n                                                common[prop2][common.deviceDefault][prop3] = siteData[prop][prop2][prop3];\n                                            } else {\n                                                common[prop2][common.deviceDefault][prop3] = siteData[prop][prop2][prop3]\n                                            };\n                                        } else {\n                                            for( prop4 in siteData[prop][prop2][prop3]){\n                                                if (typeof common[prop2] === \"undefined\" ){\n                                                    common[prop2][prop3] = {};\n                                                    common[prop2][prop3][prop4] = siteData[prop][prop2][prop3][prop4];\n                                                } else {\n                                                    common[prop2][prop3][prop4] = siteData[prop][prop2][prop3][prop4];\n                                                };\n                                            }\n                                        }\n                                    } else {\n                                        if (typeof common[prop2] === \"undefined\" ){\n                                            common[prop2] = {};\n                                            common[prop2][prop3] = siteData[prop][prop2][prop3];\n                                        } else {\n                                            common[prop2][prop3] = siteData[prop][prop2][prop3];\n                                        };\n                                    }\n                                }\n                            }\n                        };\n                    };\n                }\n\n                common.configLoaded = true;\n                $D.info(msg_pre + 'config file loaded successfully', []);\n\n            } else {\n\n                common.configLoaded = false;\n                $D.warn(msg_pre + 'Sitename not found in config file or refresh is disabled. Ads will not refresh', []);\n                common.warnings.push('Sitename not found in config file or refresh is disabled. Ads will not refresh');\n                timer.mark('siteNameNotFound');\n\n            }\n\n         },\n\n        /**\n         * {Object} plugin\n         * Encapsulates plug-in logic\n         * @private\n         */\n        plugin = {\n\n            /**\n             * {Array} queue\n             * Plug-in holder array.  Registered plug-ins are stored here.\n             * @private\n             */\n            queue       : [],\n\n            /**\n             * Adds plugins to the queue if they meet the required criteria.\n             * @param {Object}   plug   The plug-in to install\n             * @returns {Boolean}\n             * @private\n             */\n            register    : function(plug) {\n                if (!plug || !plug.init || plug.isFinished === undefined || !plug.callbacks){\n                    $D.info(messager('plug',false), [plug ? plug.name : '', plug || {}]);\n                    return false;\n                }\n\n                this.queue.push(plug);\n                $D.info(messager('plug'), [plug.name || '', plug]);\n\n                $window.unbind('CN.customEvents.dartInitialized');\n                return true;\n            },\n\n            /**\n             * Iterates over installed plug-ins and calls their init methods, passing in an object containing\n             * the queue, the plug-in's position in the queue, and its own plug-in object reference.\n             * @private\n             */\n            run        : function() {\n                var\n                    i      = 0,\n                    len    = this.queue.length,\n                    passed = false,\n                    plug,\n                    val;\n\n                for (; i < len; i++) {\n                    plug = this.queue[i];\n                    $D.info(msg_pre + 'Running Plugin', [plug.name]);\n                    plug.init({\n                        queue    : this.queue,\n                        position : i,\n                        plugin   : plug\n                    });\n                }\n            },\n\n            /**\n             * Iterates over installed plug-ins and checks their isFinished property. If all plug-ins have finished,\n             * call ready to signal the start of DART requests.\n             * Note:  This function is a callback of the CN.customEvents.dartPlugin event.  It re-scopes to the parent\n             * 'plugin' object.\n             * @param {Object}   event    The event object\n             * @param {Object}   plugin   The plug-in that triggered the event\n             * @param {Object}   val      The plug-in's \"return\" value\n             * @private\n             */\n            finished   : function(event, plugin, val) {\n\n                var\n                    i      = 0,\n                    scope  = event.data,\n                    len    = scope.queue.length,\n                    passed = scope.validate(val);\n\n                $D.info(messager('valid', passed), [plugin.name, val]);\n\n                for (; i< len; i++) {\n                    if (scope.queue[i].isFinished === false) {\n                        $D.info(messager('finished', false), [plugin.name]);\n                        return false;\n                    }\n                }\n\n                $D.info(messager('finished', true));\n                ready.call(CN.dart);\n            },\n\n            /**\n             * Validates a plug-in's return value against a defined set of rules, which in turn modify the common object\n             * properties.\n             * @param {Object}  ret  The plug-in's return value\n             * @returns {Boolean}\n             * @private\n             */\n            validate    : function(ret) {\n\n                var\n                    pass = true,\n                    key;\n\n                for (key in ret) {\n                    if(ret.hasOwnProperty(key)) {\n                        pass = (test[key] && test[key](ret[key]) && pass);\n                    }\n                }\n\n                return pass || false;\n            }\n        },\n\n        /**\n         * Puts CN.dart in a ready state by setting its common.ready property and triggering CN.customEvents.dartRequest\n         * to allow queued CN.dart.call invocations to begin drawing their ads.\n         * @returns {CN.dart}\n         * @public\n         */\n        ready = function(e) {\n            common.ready = true;\n            timer.mark('ready');\n            $D.info(msg_pre + 'Call State Set to Ready');\n            $window.trigger('CN.customEvents.dartRequest');\n            return this;\n        },\n\n        /**\n         * Refreshes ad params or with the url pars (if provided).\n         * @param  {String}    ads       Array, CSV or space-delimited list of ads id's\n         * @param  {object}    [pars]    Params to override ad values, or url path to replace serialized params\n         *\n         * @example     CN.dart.refresh('header728x90',{tile:20});\n         *              CN.dart.refresh('header728x90','');\n         * @returns {CN.dart}\n         * @public\n         */\n        refresh = function(placement, pars) {\n            var contentType;\n\n            if(common.moat_isInteracting){\n                $D.info(msg_pre + 'refresh skipped user interacting', []);\n                return\n            }\n\n            //Halts refresh if Minimum refresh is set set and not met, but will refresh when pass the minimum threshold\n            if (common.configData.minRefreshDurationMsec && typeof common.configData.minRefreshDurationMsec !== \"undefined\") {\n\n                if (!common.startRefreshTimer) {\n                    common.startRefreshTimer = (new Date()).getTime();\n                }\n\n                if (!common.startAutoRefreshTimer) {\n                    common.startAutoRefreshTimer = (new Date()).getTime();\n                }\n\n                var minRefreshDuration = common.configData.minRefreshDurationMsec,\n                    refreshTime = (new Date()).getTime() - common.startRefreshTimer,\n                    autoRefreshTime = (new Date()).getTime() - common.startAutoRefreshTimer;\n\n                common.startRefreshTimer = (new Date()).getTime();\n\n                if ( refreshTime < minRefreshDuration && autoRefreshTime < minRefreshDuration ) {\n                    return;\n                }\n\n            }\n\n            if (pars) {\n\n                if (pars.contentType) {\n                    setTargeting( \"cttp\", pars.contentType );\n                }\n\n                if(pars.lazyLoad){\n                     googletag.pubads().setTargeting(\"ll\", pars.lazyLoad);\n                }\n\n            }\n\n            if(common.isURLHasKeywords === false){\n                var adSlots = [],\n                    placements = placement ? placement.toString().split(/,|\\s+/) : [];\n\n                if (common.embed) {\n                    return this;\n                }\n\n                if(placement && placements.length !== 0){\n                    for(var ind1=0; ind1<placements.length; ind1++){\n                        for(var ind=0; ind<gptAds.length; ind++){\n                            if(gptAds[ind].adname.toString() === placements[ind1].toString()){\n                                gptAds[ind].lazyDisplay = true;\n                                adSlots.push(gptAds[ind].slot);\n                                break;\n                            }\n                        }\n                    }\n                }\n\n                if(adSlots && adSlots.length !== 0){\n                    googletag.pubads().refresh(adSlots);\n                } else {\n\n                    if( Math.round(common.dfpRefresh) < common.maxDfpRefresh ){\n                        refreshCounter();\n                    };\n\n                    //Force SQT bump always\n                    buildTracking( \"cn_adsqt\", 1380, \"adSeqTargeting\" );\n\n                    googletag.pubads().setTargeting(\"sqt\", common.adSeqTargeting);\n                    googletag.pubads().setTargeting(\"rfsh\", common.dfpRefresh);\n                    googletag.pubads().refresh(pageSlots);\n                }\n            }\n\n            common.startAutoRefreshTimer = (new Date()).getTime();\n\n            return this;\n        },\n\n        /**\n         * Checks keys in the url.\n         * @private\n         */\n        grabUrlKws = function(sponsorParameter, pars){\n            var\n                ind,\n                moreKws= [],\n                adKeywords;\n\n            if(typeof sponsorParameter === \"string\") {\n                var arr = sponsorParameter.split();\n                sponsorParameter = arr;\n            } ;\n\n            for( ind=0; ind<sponsorParameter.length; ind++){\n\n                if(CN.url.params(sponsorParameter[ind],location.search)){\n                    moreKws.push( test.kws(CN.url.params(sponsorParameter[ind],location.search)) );\n                    common.isURLHasKeywords = true;\n                } else {\n                    adKeywords = test.kws(pars.kws);\n                    common.isURLHasKeywords = false;\n                }\n\n            };\n\n            if(moreKws.length > 0){\n                adKeywords = test.kws(moreKws.join().split(\",\"));\n            }\n\n            return adKeywords;\n        },\n\n\n        refreshCounter = function() {\n            var rVal = Math.round(common.dfpRefresh),\n                rVal = rVal + 1,\n                rVal = '' + rVal;\n                common.dfpRefresh = rVal;\n        },\n\n        /**\n         * Updates the kws property of every ad in ads with common.ad.kws.\n         * @private\n         */\n        updateKws = function() {\n            var ad;\n            for (ad in ads) {\n                if (ads.hasOwnProperty(ad)) {\n                    ads[ad].kws = unique(common.ad.kws, ads[ad].kws);\n                }\n            }\n        },\n\n        /**\n         * {Object} test\n         * Used during plugin evaluation to ensure proper value replacement. All tests must return\n         * true or false to indicate failure or success.  All test conditions are necessary for properly\n         * allowing modifications to values in the common object.\n         * @public\n         */\n        test = (function() {\n            var\n                /**\n                 * {RegExp} reserved\n                 * Match any js-reserved characters\n                 * @private\n                 */\n                reserved     = /([\\?\\+\\\\\\^\\$\\*\\.\\(\\)\\[\\]\\|])/g,\n\n                /**\n                 * Combines sites with common.site and returns a period-delimited string.\n                 * @param {String}   val   A site value.\n                 * @returns {String}\n                 * @private\n                 */\n                siteResolver = function(val) {\n                    if (CN.site.testads) {\n                        return common.site;\n                    }\n\n                    var\n                        $val  = val.split('.'),\n                        $site = common.site.split('.'),\n                        i = 0,\n                        len = $site.length > $val.length ? $site.length : $val.length,\n                        result = [];\n\n                    for (; i < len; i++){\n                        result[i] = ($val[i] || $site[i]);\n                    }\n\n                    return result.join('.');\n                },\n\n                /**\n                 * {RegExp} urlPat\n                 * @private\n                 */\n                urlPat  = /^https?:/,\n\n                /**\n                 * {RegExp} zoneEnd\n                 * @private\n                 */\n                zoneEnd = /;$|$/,\n\n                /**\n                 * {RegExp} zonePat\n                 * @private\n                 */\n                zonePat = new RegExp(CN.site.testads ? \"testads;\" + \"$\" : \"[\\\\w_;]+$\"),\n\n                /**\n                 * Sanitizes a zone value.\n                 * @param {String}  val  A zone value\n                 * @returns {String}\n                 * @private\n                 */\n                zoneResolver = function(val) {\n\n                    var\n                        prop,\n                        map = common.charmap;\n\n                    if (zonePat.test(val)) {\n                        for (prop in map) {\n                            if (map.hasOwnProperty(prop)) {\n                                val = val.replace(new RegExp(prop, \"gi\"), map[prop]);\n                            }\n                        }\n                        return val.replace(zoneEnd, ';');\n                    }\n                    $D.warn(\"CN Dart zoneResolver\", [\"Invalid Dart Zone\", val]);\n                    common.warnings.push(\"CN Dart zoneResolver - Invalid Dart Zone\");\n                    return val;\n                },\n\n                /**\n                 * Sanitizes a kw value.\n                 * @param {String}  val  A kw value\n                 * @returns {String}\n                 * @private\n                 */\n                kwResolver = function(val) {\n\n                    var\n                        prop,\n                        map = common.charmap;\n\n\n                    for (prop in map) {\n                        if (map.hasOwnProperty(prop)) {\n                            val = val.replace(new RegExp(prop, \"gi\"), map[prop]);\n                        }\n                    }\n                    return val;\n                };\n\n            return {\n\n                /**\n                 * Allows modifications to the common.ad.kws\n                 * @param {Object}  val  A hash containing a kws array.\n                 * @returns {Boolean}\n                 * @public\n                 */\n                ad  : function(val) {\n\n                    if (!val.kws) {\n                       return false;\n                    }\n                    else {\n                        common.ad.kws = jQuery.isArray(val.kws) ? unique(val.kws) : common.ad.kws;\n                        updateKws();\n                        return true;\n                    }\n                },\n\n                /**\n                 * Adds a valid param object to common.params.\n                 * @param {Object}  param  An object containing the param, its default value, and (optionally) a function to\n                 *                         refresh itself should the value depend on the current state of certain properties.\n                 * @returns {Boolean}\n                 * @public\n                 */\n                addparam    : function(param) {\n                    var\n                        add,\n                        p,\n                        i;\n\n                    if (!param) {\n                        return false;\n                    }\n\n                    // If we have an array of params.\n                    if (Object.prototype.toString.call(param) === '[object Array]') {\n                        p = param;\n                    } else {\n                        p = [param];\n                    }\n\n                    for (i=0; i<p.length; i+=1) {\n                        if (!p[i].pKey) {\n                            return false;\n                        }\n                        add = {};\n                        add.defaultValue   = p[i].pValue;\n                        add.refresh        = p[i].refresh;\n                        add.noKey          = p[i].noKey || false;\n\n                        common.params[p[i].pKey] = add;\n                    }\n\n                    return true;\n                },\n\n                /**\n                 * Maps reserved characters to a value, and places them in common.charmap.\n                 * @param {Object}  val  A hash of reserved characters and their replacements\n                 * @returns {Boolean}\n                 * @public\n                 */\n                charmap : function(val){\n\n                    var\n                        prop,\n                        map = common.charmap = {};\n                    for (prop in val) {\n                        if (val.hasOwnProperty(prop)) {\n                            map[prop.replace(reserved, '\\\\$1')] = val[prop];\n                        }\n                    }\n                    return true;\n                },\n\n                /**\n                 * Sets the common.dcopt flag.\n                 * @param {Boolean}  val  If this is a dcopt ad\n                 * @returns {Boolean}\n                 * @public\n                 */\n                dcopt   : function(val) {\n                    if (CN.isBoolean(val)) {\n                        common.dcopt = val;\n                        return true;\n                    }\n                    else {\n                        return false;\n                    }\n                },\n\n                /**\n                 * Sets the common.embed flag.\n                 * @param {Boolean}  val  If this is an embedded ad\n                 * @returns {Boolean}\n                 * @public\n                 */\n                embed   : function(val) {\n                    if (CN.isBoolean(val)) {\n                        common.embed = val;\n                        return true;\n                    }\n                    else {\n                        return false;\n                    }\n                },\n\n                /**\n                 * Sets the common.site value.\n                 * @param {String}  val  The site string to be resolved and set\n                 * @returns {Boolean}\n                 * @public\n                 */\n                site    : function(val){\n                    common.site = siteResolver(val);\n                    return true;\n                },\n\n                /**\n                 * Sets the common.url value.\n                 * @param {String}  val  The url string to format and set\n                 * @returns {Boolean}\n                 * @public\n                 */\n                url     : function(val){\n                    if(CN.isString(val)){\n                        common.url = val.replace(urlPat,location.protocol);\n                        return true;\n                    }\n                    return false;\n                },\n\n                /**\n                 * Sets the common.zone value.\n                 * @param {String}  val  The zone string to resolve and set\n                 * @returns {Boolean}\n                 * @public\n                 */\n                zone    : function(val){\n                    var ret = zoneResolver(val);\n                    if (ret) {\n                        common.zone = ret;\n                        return true;\n                    }\n                    return false;\n                },\n\n                /**\n                 * Publicizes test.zoneResolver.\n                 * @param {String}  val  The zone string to resolve.\n                 * @returns {String}\n                 * @public\n                 */\n                adzone  : zoneResolver,\n\n                /**\n                 * Publicizes test.kwResolver.\n                 * @param {String}  val  The kw string to resolve.\n                 * @returns {String}\n                 * @public\n                 */\n                kws  : function(kws) {\n\n                    var\n                        arr = (kws) ? [].concat(kws) : [],\n                        i = 0,\n                        len = arr.length;\n\n                    for (; i <len; i++) {\n                        arr[i] = kwResolver(arr[i]);\n                    }\n                    return arr;\n                }\n\n\n            };\n        }()),\n\n        /**\n         * Creates an array with unique values from a set of arrays.\n         * @param   {Array}  arguments   Array(s) to be concatenated and filtered.\n         * @returns {String}\n         * @private\n         */\n        unique = function() {\n\n            var\n                v,\n                i = 0,\n                ret = [].concat.apply([], arguments).sort(),\n                l = ret.length;\n\n            for (; i < l; i++) {\n                v = ret.shift();\n                if (ret[0] !== v) {\n                    ret.push(v);\n                }\n            }\n            return clean_ws(ret.join(',')).split(',');\n        },\n\n        /**\n         * Strips out an white-space in a string.\n         * @param {String}  str   The string to process\n         * @returns {String}\n         * @private\n         */\n        clean_ws = function(str){\n            return str.replace(/^,|\\s*|,^/g, '');\n        },\n\n        /**\n         * {Object} remote\n         * Object for containing methods used for calling dart from an external source.\n         * @deprecated\n         * @public\n         */\n        remote = {\n            init : function(site,zone,kws){\n                if (!zone || common.initialized) {\n                    $D.info(msg_pre + \"Remote Init error.  No calls will be made.\",[\"site : \" + site]);\n                    return this;\n                }\n\n                common.frameurl   = site + common.frameurl;\n                common.remoteSite = site;\n                common.remoteInit = site + common.remote + 'init/' + zone + '/' + 'kw=' + CN.url.path().join(';kw=') + ';' + kws;\n                embedScript(common.remoteInit);\n            }\n\n        },\n\n        /**\n         * Generate a script element for embedded ads and remote calls.  This function will block.\n         * @param {String}   src   The location of the ad\n         * @deprecated\n         * @private\n         */\n        embedScript = function(src) {\n            document.write('<scr'+'ipt type=\"text/javascript\" src=\"'+src+'\"></scr'+'ipt>');\n        },\n\n        pushGPTAds = function(){\n\n            var device = common.device;\n\n            // Render Ads for ads other than Slideshow Interstitial\n            if(gptAdsRendered === false){\n                for(var ind=0; ind<gptAds.length; ind++){\n\n                    if(gptAds[ind].drawn === false){\n                        var adSlot = undefined;\n\n                        if(gptAds[ind].adplacement === 'interstitial1x1_frame'){\n                            //Interstitial ad\n                            adSlot = googletag.defineOutOfPageSlot(gptAds[ind].url, gptAds[ind].adplacement)\n                            .addService(googletag.pubads());\n\n                        } else {\n                            var\n                                extra = ( gptAds[ind].xkws && gptAds[ind].xkws.length > 1 ) ? \"_\"+gptAds[ind].xkws[1] : \"\",\n                                adSlotArray = (gptAds[ind].xkws && gptAds[ind].xkws.length >= 1) ? common.gptAdSlotSizes[device][gptAds[ind].adsize[0] +\"x\"+ gptAds[ind].adsize[1] +\"_\"+ gptAds[ind].xkws[0] +\n                                                extra] : common.gptAdSlotSizes[device][gptAds[ind].adsize[0] +\"x\"+ gptAds[ind].adsize[1]];\n\n\n                            if(adSlotArray && adSlotArray.length !== 0){\n                                adSlot = googletag.defineSlot(gptAds[ind].url, adSlotArray, gptAds[ind].adplacement)\n                                            .addService(googletag.pubads())\n                                            .setTargeting(\"st\", gptAds[ind].adname)\n                                            .setCollapseEmptyDiv(true,true);\n                            } else {\n                                adSlot = googletag.defineSlot(gptAds[ind].url, gptAds[ind].adsize, gptAds[ind].adplacement)\n                                            .addService(googletag.pubads())\n                                            .setTargeting(\"st\", gptAds[ind].adname)\n                                            .setCollapseEmptyDiv(true,true);\n                            }\n\n                       }\n\n                        gptAds[ind].slot = adSlot;\n                        gptAds[ind].drawn = true;\n\n\n                        // Push Keywords into array\n                        if(!common.gptAdsParams[\"kw\"]){\n                            common.gptAdsParams[\"kw\"] = [];\n                        }\n\n                        for(var ind1=0; ind1<gptAds[ind].kws.length; ind1++){\n                            common.gptAdsParams[\"kw\"].push(gptAds[ind].kws[ind1]);\n                        }\n\n                        if(ind === (gptAds.length - 1)){\n                            var lotameKeywords = buildParams(gptAds[0]),\n                                keywords,\n                                aamUUID = CN.cookie.get(\"aam_uuid\");\n\n                            if(lotameKeywords && lotameKeywords.indexOf(\"=\") !== -1){\n                                if(lotameKeywords.indexOf(\";\")){\n                                    keywords = lotameKeywords.split(\";\");\n                                }\n\n                                for(var ind1=0; ind1<keywords.length; ind1++){\n                                    if($.trim(keywords[ind1]) !== \"\"){\n                                        if(keywords[ind1].indexOf(\"=\") !== -1){\n                                            var keywordPairs = keywords[ind1].split(\"=\");\n                                            googletag.pubads().setTargeting(keywordPairs[0], keywordPairs[1]);\n                                        }\n                                    }\n                                }\n                            }\n\n                            if(CN.slideshow){\n                                common.gptAdsParams[\"kw\"].push(\"slideshow\");\n                            }\n\n                            if(aamUUID){\n                                googletag.pubads().setTargeting(\"aamId\", aamUUID);\n                            }\n\n                            if(common.gptAdsParams[\"kw\"]){\n\n                               for(var adKeys=0; adKeys<common.ad.kws.length; adKeys++){\n                                    common.gptAdsParams[\"kw\"].push(common.ad.kws[adKeys]);\n                               };\n\n\n                                common.gptAdsParams[\"kw\"] = unique(common.gptAdsParams[\"kw\"]);\n                                googletag.pubads().setTargeting(\"kw\", common.gptAdsParams[\"kw\"]);\n                            }\n\n                            //Pass content id and content type\n                            googletag.pubads().setTargeting(\"ctid\", common.contentId);\n                            googletag.pubads().setTargeting(\"cttp\", common.contentType);\n                            googletag.pubads().setTargeting(\"rfsh\", common.dfpRefresh);\n                            googletag.pubads().setTargeting(\"sqt\", common.adSeqTargeting);\n                            googletag.pubads().setTargeting(\"CAP\", common.adSeqCap);\n                            googletag.pubads().setTargeting(\"scl\", common.socialKey);\n                            googletag.pubads().setTargeting(\"pvid\", common.pvid);\n                            googletag.pubads().setTargeting(\"sov\", common.sov);\n\n\n\n                            googletag.pubads().collapseEmptyDivs(true);\n                            googletag.pubads().disableInitialLoad();\n                            googletag.pubads().enableSingleRequest();\n                            googletag.pubads().enableAsyncRendering();\n\n                            googletag.enableServices();\n\n                            googletag.pubads().addEventListener('slotRenderEnded', common.gptCallback );\n                            googletag.pubads().addEventListener('slotRenderEnded', function(event){ common.gptEvent.push(event);\n                                                                                                    timer.mark(\"GPTAdsRendered\");\n                                                                                                    if(!common.etfCalledOnce){enableETF()};\n                                                                                    });\n\n\n\n                        }\n\n                   }// if drawn\n                }// end of main for loop\n\n            } else {    // Render Ads for Slideshow Ads\n               // if(!slideshowInterstitialAds.drawn){\n                    var lotameKeywords = buildParams(slideshowInterstitialAds),\n                        keywords,\n                        adSlot,\n                        extra = ( slideshowInterstitialAds.xkws && slideshowInterstitialAds.xkws.length > 1 ) ? \"_\"+slideshowInterstitialAds.xkws[1] : \"\",\n                        adSlotArray = (slideshowInterstitialAds.xkws && slideshowInterstitialAds.xkws.length >= 1) ? common.gptAdSlotSizes[device][slideshowInterstitialAds.adsize[0] +\"x\"+ slideshowInterstitialAds.adsize[1] +\"_\"+ slideshowInterstitialAds.xkws[0] +\n                        extra] : common.gptAdSlotSizes[device][slideshowInterstitialAds.adsize[0] +\"x\"+ slideshowInterstitialAds.adsize[1]],\n                        aamUUID = CN.cookie.get(\"aam_uuid\");\n\n                        slideshowInterstitialAds.served = false;\n\n                        if(adSlotArray && adSlotArray.length !== 0){\n                            adSlot = googletag.defineSlot(slideshowInterstitialAds.url, adSlotArray, slideshowInterstitialAds.adplacement)\n                                        .addService(googletag.pubads())\n                                        .setCollapseEmptyDiv(true,true);\n                        } else {\n                            adSlot = googletag.defineSlot(slideshowInterstitialAds.url, slideshowInterstitialAds.adsize, slideshowInterstitialAds.adplacement)\n                                        .addService(googletag.pubads())\n                                        .setCollapseEmptyDiv(true,true);\n                        }\n\n                    slideshowInterstitialAds.slot = adSlot;\n                    slideshowInterstitialAds.drawn = true;\n\n\n                    // Parameters for each ad calls\n                    if(aamUUID){\n                        googletag.pubads().setTargeting(\"aamId\", aamUUID);\n                    }\n\n                    if(lotameKeywords && lotameKeywords.indexOf(\"=\") !== -1){\n                        if(lotameKeywords.indexOf(\";\")){\n                            keywords = lotameKeywords.split(\";\");\n                        }\n                        for(var ind1=0; ind1<keywords.length; ind1++){\n                            if($.trim(keywords[ind1]) !== \"\"){\n                                if(keywords[ind1].indexOf(\"=\") !== -1){\n                                    var keywordPairs = keywords[ind1].split(\"=\");\n                                    googletag.pubads().setTargeting(keywordPairs[0], keywordPairs[1]);\n                                }\n                            }\n                        }\n                    }\n\n                    //Force SQT bump always\n                    buildTracking( \"cn_adsqt\", 1380, \"adSeqTargeting\" );\n\n                    //Set page level targeting for plugins\n                    googletag.pubads().setTargeting(\"kw\", slideshowInterstitialAds.kws);\n\n                    //Pass content id and content type\n                    googletag.pubads().setTargeting(\"ctid\", common.contentId);\n                    googletag.pubads().setTargeting(\"cttp\", common.contentType);\n\n            }\n\n\n        },\n\n        /**\n         * Creates and stores all ad objects by extending the base common.ad.\n         *\n         * @param {Object}    [pars]      Ad placement params\n         *                                 CN.dart.oneAdCall({\n         *                                   \"topBanner\":{\n         *                                     \"sz\": \"728x90\",\n         *                                     \"kws\": [\"top\"]\n         *                                   },\n         *                                   \"yrailTop\":{\n         *                                     \"sz\": \"300x250\",\n         *                                     \"kws\": [\"top\"]\n         *                                   },\n         *                                   \"pushdown\":{\n         *                                     \"sz\": \"970x418\",\n         *                                     \"kws\": [\"top\"]\n         *                                   },\n         *                                   \"yrailBottom\":{\n         *                                     \"sz\": \"300x250\",\n         *                                     \"kws\": [\"top\"]\n         *                                   }\n         *                               });\n         *\n         *\n         * @ private\n         */\n        oneAdCall = function(pars, options){\n\n            if (typeof pars === \"undefined\"){\n                $D.warn(msg_pre+'no ad parameters were passed in.');\n                common.errors.push(msg_pre+'no ad parameters were passed in.');\n                return false;\n            };\n\n            if (!common.initialized) {\n                $D.warn(msg_pre+'ads library needs to be initialized first.');\n                common.errors.push(msg_pre+'ads library needs to be initialized first.');\n                return false;\n            };\n\n            if (common.oneAdCallIInit) {\n                $D.warn(msg_pre+'oneAdCall() should only be used once per page. Please consider using moreAds().');\n                common.errors.push(msg_pre+'oneAdCall() should only be used once per page. Please consider using moreAds().');\n                timer.mark('oneAddCallUsedMoreThanOnce');\n                return false;\n            };\n\n            for(key in pars){\n                var name = key,\n                    opts = pars[key];\n\n                    call(name, opts);\n            };\n\n            if(typeof googletag.defineSlot === \"undefined\"){\n\n                setTimeout(function(){\n\n                    pushGPTAds();\n\n                    displayGPTAds();\n\n                    gptAdsRendered = true;\n\n                    if (options) {\n                       setTargeting( options );\n                    }\n\n                    jQuery(window).trigger('CN.customEvents.GPTAdsRendered');\n\n                }, 1000);\n\n            } else {\n\n                setTimeout(function(){\n                    pushGPTAds();\n\n                    displayGPTAds();\n\n                    gptAdsRendered = true;\n\n                    if (options) {\n                       setTargeting( options );\n                    }\n\n                    jQuery(window).trigger('CN.customEvents.GPTAdsRendered');\n                }, 300);\n            };\n\n            common.oneAdCallIInit = true;\n\n        },\n\n        uriParse = function(URIZone, adUnit3, adUnit4){\n\n                if(URIZone){\n                    if(URIZone.charAt(0) !== \"/\"){\n                        URIZone = \"/\"+ URIZone;\n                    }\n\n                    if(URIZone.charAt(URIZone.length - 1) === \"/\"){\n                        URIZone = URIZone.substring(0, URIZone.length - 1);\n                    }\n\n                    if(adUnit3){\n                        if(adUnit3.charAt(0) !== \"/\"){\n                            adUnit3 = \"/\"+ adUnit3;\n                        }\n\n                        if(adUnit3.charAt(adUnit3.length - 1) === \"/\"){\n                            adUnit3 = adUnit3.substring(0, adUnit3.length - 1);\n                        }\n\n                        URIZone = URIZone + adUnit3;\n                    }\n\n                    if(adUnit4){\n                        if(adUnit4.charAt(0) !== \"/\"){\n                            adUnit4 = \"/\"+ adUnit4;\n                        }\n\n                        if(adUnit4.charAt(adUnit4.length - 1) === \"/\"){\n                            adUnit4 = adUnit4.substring(0, adUnit4.length - 1);\n                        }\n\n                        URIZone = URIZone + adUnit4;\n                    }\n\n                }\n\n                return URIZone;\n        },\n\n        /**\n         * Checks is string is blank\n         * @param {String}    name\n         *\n         * @returns boolean\n         * @private\n         */\n        isBlank = function (str) {\n            return (!str || /^\\s*$/.test(str));\n        },\n\n        enableETF = function(){\n\n            var enable, threshold, rndNum;\n\n            enable = false;\n            common.etfCalledOnce = true;\n            rndNum = getRandomInt(1, 100);\n\n            function getRandomInt(min, max) {\n              return Math.floor(Math.random() * (max - min + 1)) + min;\n            };\n\n             if( typeof common.configData.etfThreshold !== \"undefined\"){\n                if(parseInt(common.configData.etfThreshold, 10) > 0){\n                    threshold = parseInt(common.configData.etfThreshold, 10);\n                    if(threshold >= rndNum){\n                        common.triggerEFT = true;\n                        checkMyDivPlease();\n                        trackETF();\n                    }\n\n                }\n             };\n\n            return enable;\n        },\n\n       /**\n         * Send ETF tracking information\n         * @param\n         * @returns\n         * @public\n         */\n        trackETF = function(){\n\n            var track, buildParams;\n\n            track = function(){\n                $.ajax({\n                    type       : \"GET\",\n                    url         : '//event.condenastdigital.com/images/event.gif?' + buildParams(),\n                    error       : function(){\n                        $D.info('ETF track error',[]);\n                    },\n                    cache       : false,\n                    success     : function(data) {\n                        $D.info('ETF track success');\n                    },\n                    complete    : function(){\n                        $D.info('ETF call complete');\n                    }\n                });\n            };\n\n\n            buildParams = function(){\n                var\n                    params, markers;\n\n                    markers = $.param(CN.dart.timer, true);\n                    markers = markers.replace(/&/g,\"|\");\n\n                    params = {\n                        \"e0_id\"     : common.pvid,\n                        \"e0_ec\"     : \"abandoned\",\n                        \"e0_env\"    : \"dart\",\n                        \"e0_sc\"     : CN.site.name,\n                        \"e0_ct\"     : common.version.toString(),\n                        \"e0_tit\"    : browserCheck(),\n                        \"e0_sctn\"   : \"contentType=\" + common.contentType + \"|contentId=\" + common.contentId + \"|useOneAdCall=\" + common.useOneAdCall + \"|zone=\" + common.zone,\n                        \"e0_url\"    : markers\n                    };\n\n                    function browserCheck(){\n                        var N= navigator.appName, ua= navigator.userAgent, tem;\n                        var M= ua.match(/(opera|chrome|safari|firefox|msie|trident)\\/?\\s*(\\.?\\d+(\\.\\d+)*)/i);\n\n                        if(M && (tem= ua.match(/version\\/([\\.\\d]+)/i))!= null) {M[2]=tem[1];}\n                        M= M? [M[1], M[2]]: [N, navigator.appVersion,'-?'];\n                        return M.toString()\n                    };\n\n\n                return $.param(params);\n            };\n\n            track();\n\n        },\n\n        googletagEnable = function(){\n\n            var lotameKeywords = buildParams(gptAds[0]),\n                                        keywords,\n                                        aamUUID = CN.cookie.get(\"aam_uuid\");\n\n            if(lotameKeywords && lotameKeywords.indexOf(\"=\") !== -1){\n                if(lotameKeywords.indexOf(\";\")){\n                    keywords = lotameKeywords.split(\";\");\n                }\n\n                for(var ind1=0; ind1<keywords.length; ind1++){\n                    if($.trim(keywords[ind1]) !== \"\"){\n                        if(keywords[ind1].indexOf(\"=\") !== -1){\n                            var keywordPairs = keywords[ind1].split(\"=\");\n                            googletag.pubads().setTargeting(keywordPairs[0], keywordPairs[1]);\n                        }\n                    }\n                }\n            };\n\n            if(aamUUID){\n                googletag.pubads().setTargeting(\"aamId\", aamUUID);\n            };\n\n            if(common.gptAdsParams[\"kw\"]){\n\n               for(var adKeys=0; adKeys<common.ad.kws.length; adKeys++){\n                    common.gptAdsParams[\"kw\"].push(common.ad.kws[adKeys]);\n               };\n\n                common.gptAdsParams[\"kw\"] = unique(common.gptAdsParams[\"kw\"]);\n                googletag.pubads().setTargeting(\"kw\", common.gptAdsParams[\"kw\"]);\n            };\n\n\n            googletag.pubads().setTargeting(\"ctid\", common.contentId);\n            googletag.pubads().setTargeting(\"cttp\", common.contentType);\n            googletag.pubads().setTargeting(\"rfsh\", common.dfpRefresh);\n            googletag.pubads().setTargeting(\"sqt\", common.adSeqTargeting);\n            googletag.pubads().setTargeting(\"CAP\", common.adSeqCap);\n            googletag.pubads().setTargeting(\"scl\", common.socialKey);\n            googletag.pubads().setTargeting(\"pvid\", common.pvid);\n            googletag.pubads().setTargeting(\"sov\", common.sov);\n            googletag.pubads().collapseEmptyDivs(true);\n            googletag.pubads().disableInitialLoad();\n            googletag.pubads().enableSingleRequest();\n            googletag.pubads().enableAsyncRendering();\n            googletag.enableServices();\n            googletag.pubads().addEventListener('slotRenderEnded', common.gptCallback );\n            googletag.pubads().addEventListener('slotRenderEnded', function(event){ common.gptEvent.push(event);\n                                                                                    timer.mark(\"GPTAdsRendered\");\n                                                                                    if(!common.etfCalledOnce){enableETF()};\n                                                                    });\n        },\n\n        /**\n         * Infinite Scroll Pages - load ads in batch SRA\n         * @param pars {Object}  {\n         *\n         *                   \"adSlot1\":{\n         *                     \"sz\": \"728x90\",\n         *                     \"kws\": [\"top\"],\n         *                   },\n         *                   \"adSlot2\":{\n         *                     \"sz\": \"300x250\",\n         *                     \"kws\": [\"top\"]\n         *                   }\n         *\n         *  optional - @param opts {Object}  {\n         *                                 \"adUnit2\" : \"home\",\n         *                                 \"adUnit3\" : \"\",\n         *                                 \"adUnit4\" : \"\",\n         *                                 \"contentType\" : \"\",\n         *                                 \"targetKws\" : [\"\",\"\",\"\"]\n         *\n         *                        }\n         * @private\n         **/\n\n        moreAds = function(pars, opts){\n\n           var adSlots = [],\n               URIZone,\n               contentType,\n               targetKws,\n               refresh,\n               moreAdsSlotIndex = 0;\n\n\n            if (!common.initialized) {\n                $D.warn(msg_pre+'ads library needs to be initialized first.');\n                return\n            };\n\n            if(typeof pars === \"undefined\" ){\n                $D.warn(msg_pre+'missiing ad parameters object.');\n                return;\n            };\n\n            if(!common.interstitialDivCreated){\n                googletagEnable();\n            };\n\n            //Pass new info for zone targeting\n            if(opts){\n\n                URIZone = \"/\"+ common.gptAdKey +\"/\"+ common.site + uriParse(opts.adUnit2, opts.adUnit3, opts.adUnit4);\n\n                if (opts.contentType) {\n                    setTargeting( \"cttp\", opts.contentType );\n                }\n\n                targetKws = test.kws(opts.targetKws) || [];\n\n                //Pass content id and content type\n                googletag.pubads().setTargeting(\"kw\", targetKws);\n\n                //Checks if tracking is disabled\n                if ( !opts.disableTracking || typeof opts.disableTracking === \"undefined\") {\n                    //checks and passes Sequential tracking to gtp\n                    getTrackingSeq();\n                    googletag.pubads().setTargeting(\"sqt\", common.adSeqTargeting);\n                }\n\n            } else {\n                //checks and passes Sequential tracking to gtp\n                getTrackingSeq();\n                googletag.pubads().setTargeting(\"sqt\", common.adSeqTargeting);\n            }\n\n            for(key in pars){\n\n                var extraKws,\n                    adSlotArray,\n                    dims;\n\n                    dims = pars[key].sz.split('x');\n                    dims[0] = parseInt(dims[0], 10);\n                    dims[1] = parseInt(dims[1], 10);\n\n                    extraKws = ( pars[key].kws && pars[key].kws.length > 1 ) ? \"_\"+pars[key].kws[1] : \"\";\n\n                    adSlotArray = ( pars[key].kws && pars[key].kws.length >= 1) ? common.gptAdSlotSizes[common.device][pars[key].sz +\"_\"+ pars[key].kws[0] + extraKws] : common.gptAdSlotSizes[common.device][pars[key].sz];\n\n                    if(typeof adSlotArray === \"undefined\"){\n                        adSlotArray = [ dims[0] , dims[1] ];\n                    };\n\n\n                if(opts){\n\n                    googletag.cmd.push(function() { adSlots.push(googletag.defineSlot(URIZone, adSlotArray, key).addService(googletag.pubads()) ) });\n\n                    $D.info(msg_pre + key + ' ad call zone changed ', []);\n\n                } else {\n\n                    googletag.cmd.push(function() { adSlots.push(googletag.defineSlot(gptAds[1].url, adSlotArray, key).addService(googletag.pubads()) ) });\n                };\n\n                googletag.cmd.push(function() { googletag.display(key); });\n\n                $D.info(msg_pre + key + ' ad call requested ', []);\n\n                moreAdSlots.push({\n                        \"adplacement\" : key,\n                        \"slot\" : adSlots,\n                        \"adsize\" : dims,\n                        \"slotIndex\" : moreAdsSlotIndex\n                });\n\n                moreAdsSlotIndex++;\n\n                //Not normal call execution\n                if(!common.interstitialDivCreated){\n\n                    oopInterstitial({}, URIZone, \"moreAdSlots\");\n                    googletag.cmd.push(function() { adSlots.push(googletag.defineOutOfPageSlot(URIZone,  \"interstitial1x1_frame\").addService(googletag.pubads()) ) });\n\n                    googletag.cmd.push(function() { googletag.display(\"interstitial1x1_frame\"); });\n\n                    moreAdSlots.push({\n                        \"adplacement\" : \"interstitial1x1_frame\",\n                        \"slot\" : adSlots,\n                        \"adsize\" : [1,1],\n                        \"slotIndex\" : moreAdsSlotIndex\n                    });\n\n                    moreAdsSlotIndex++;\n\n                    gptAdsRendered = true;\n\n                };\n\n            };\n\n            googletag.pubads().setTargeting(\"CAP\", common.adSeqCap);\n            googletag.pubads().refresh(adSlots);\n\n        },\n\n        moreAdsRefresh = function(placement, opts){\n          var\n                adSlots,\n                placements,\n                contentType;\n\n            adSlots = [],\n            placements = placement ? placement.toString().split(/,|\\s+/) : [];\n\n            if(typeof placement === \"undefined\" ){\n\n                $D.warn(msg_pre+' moreAds cannot refresh. Missing ad param');\n\n                return;\n\n            } else {\n\n                if (opts) {\n                    contentType = opts.contentType || \"\";\n                    googletag.pubads().setTargeting(\"cttp\", contentType);\n                    $D.info(msg_pre + 'New Content type: '+contentType);\n                }\n\n                if(placement && placements.length !== 0){\n                    for(var ind1=0; ind1<placements.length; ind1++){\n                        for(var ind=0; ind<moreAdSlots.length; ind++){\n                            if(moreAdSlots[ind].adplacement.toString() === placements[ind1].toString()){\n                                adSlots.push(moreAdSlots[ind].slot[moreAdSlots[ind].slotIndex]);\n                                $D.info(msg_pre+'refreshing ' + moreAdSlots[ind].adplacement +' moreAds');\n\n                                break;\n                            }\n                        }\n                    }\n\n                }\n\n                if(adSlots && adSlots.length !== 0){\n\n                    if( Math.round(common.dfpRefresh) < common.maxDfpRefresh ){\n                        refreshCounter();\n                    };\n\n                    googletag.pubads().setTargeting(\"rfsh\", common.dfpRefresh);\n                    googletag.pubads().refresh(adSlots);\n                }\n            }\n\n        },\n\n        /**\n         * Will launch and display the ad log in a new window\n         *\n         * @public\n         */\n        getAdLogWin = function() {\n            var myWindow,\n                adlog;\n\n            //Giving the site 5 seconds to load ads\n            setTimeout( function() {\n                myWindow = window.open(\"\",\"\",\"_blank\");\n                adlog = CN.dart.getAdLog();\n                //removing becuse property is throwing circular errors.\n                adlog.configFileData = undefined;\n                adlog = JSON.stringify(adlog, null, 4);\n                myWindow.document.body.innerHTML = \"<pre>\"+adlog+\"</pre>\";\n            }, 5000);\n        },\n\n        // Display GPT Ads\n        displayGPTAds = function(){\n            var buildSlots = [];\n            if(gptAdsRendered === false && !gptAdsBuilt){\n                // Display the Ads\n                for(var ind=0; ind<gptAds.length; ind++){\n\n                    //Check for inView plugin\n                    if(typeof CN.ad.viewableRefresh !== \"undefined\" && typeof common.configData.refresh !== \"undefined\" && typeof common.configData.refresh.lazyLoad !== \"undefined\" && common.configData.refresh.lazyLoad ){\n\n                        if (CN.ad.viewableRefresh.inViewportFirstLoad($('#'+gptAds[ind].adplacement).get(0))) {\n                            googletag.cmd.push(function() {\n                                googletag.display(gptAds[ind].adplacement);\n                            });\n                            gptAds[ind].lazyDisplay = true;\n                            buildSlots.push(gptAds[ind].slot);\n                            pageSlots.push(gptAds[ind].slot);\n                        }\n\n                    } else {\n\n                        googletag.cmd.push(function() {\n                            googletag.display(gptAds[ind].adplacement);\n                        });\n                        gptAds[ind].lazyDisplay = true;\n                        buildSlots.push(gptAds[ind].slot);\n                        pageSlots.push(gptAds[ind].slot);\n                    };\n\n                }\n\n                //ETF for master ad\n                timer.mark(\"MasterAdSize:\"+gptAds[0].adplacement);\n\n                if(!gptAdsBuilt){\n                    gptAdsBuilt = true;\n                };\n\n            } else if(typeof slideshowInterstitialAds.xkws !== \"undefined\" ){\n            //Add 300x250 interstitial ad to call for slideshows\n            //For SRA this enforces roadblocking\n\n\n                if ( ($.trim(slideshowInterstitialAds.xkws[0]) === \"interstitial\") && (slideshowInterstitialAds.adsize[0]+\"x\"+slideshowInterstitialAds.adsize[1] === \"300x250\") ){\n\n                    if(interstitialAdCnt === 0){  //initial interstitial ad\n                        // Display page ads + slideshow ad\n                        for(var ind=0; ind<gptAds.length; ind++){\n                            googletag.cmd.push(function() {\n                                googletag.display(gptAds[ind].adplacement);\n                            });\n                            buildSlots.push(gptAds[ind].slot);\n\n                        };\n\n                       //Add slideshow ad\n                        googletag.cmd.push(function() {\n                            googletag.display(slideshowInterstitialAds.adplacement);\n                        });\n\n                       //Flag stating servedd\n                        slideshowInterstitialAds.served = true;\n                        buildSlots.push(slideshowInterstitialAds.slot);\n                        pageSlotsPlusInterstitial = buildSlots;\n                        refreshCalled = false;\n                        interstitialAdCnt = interstitialAdCnt + 1;\n\n                    } else {\n\n                        googletag.pubads().refresh(pageSlotsPlusInterstitial);\n                        refreshCalled = true;\n                    };\n\n\n                } else {\n                    googletag.cmd.push(function() {\n                        googletag.display(slideshowInterstitialAds.adplacement);\n                    });\n\n                     buildSlots.push(slideshowInterstitialAds.slot);\n                     refreshCalled = false;\n                };\n\n            } else {\n                //All other dynamic ad calls - infinite scrolling\n                if(typeof slideshowInterstitialAds.xkws !== \"undefined\" ){\n                    googletag.cmd.push(function() {\n                        googletag.display(slideshowInterstitialAds.adplacement);\n                    });\n\n                     buildSlots.push(slideshowInterstitialAds.slot);\n                     refreshCalled = false;\n                };\n\n            };\n\n            if(gptAdsBuilt && !refreshCalled){\n                googletag.pubads().refresh(buildSlots);\n                refreshCalled = true;\n                timer.mark('GPT_SRA_Called');\n            };\n        };\n\n    /**\n     * Have ready be the default callback to CN.customEvents.dartInitialized.\n     * Registering a plugin unbinds this event.\n     */\n    $window.one('CN.customEvents.dartInitialized', ready);\n\n    // Allow plugins to asynchronously send back data when they've completed\n    $window.bind('CN.customEvents.dartPlugin', plugin, plugin.finished);\n\n    timer.mark('start');\n\n    return {\n\n        /**\n         * Publicize call.\n         * @param {String}    name        Unique name prefix for storage, container div, and iframe id generation\n         * @param {Object}    [pars]      Additional ad params to extend or override common.ad values\n         * @returns {CN.dart}\n         * @public\n         */\n        call : call,\n\n        oneAdCall : oneAdCall,\n\n        moreAds : moreAds,\n\n        getMoreAdsCollection : function(){\n            return moreAdSlots;\n        },\n\n        moreAdsRefresh : moreAdsRefresh,\n\n        getGPTAds : function(){\n            return gptAds;\n        },\n\n        /**\n         * Publicize call.\n         * Returns the delay time for DOM to be built for ads to load\n         * Mainly for GQ HGQRU\n         * @public\n         */\n        getDomDelay : function(){\n            var urlPath = CN.url.path(),\n                delay = common.domDelay.defaultVal;\n\n            for(prop in common.domDelay){\n                if( prop !== \"defaultVal\" ){\n                    if( prop ===  urlPath.join(\"\") ){\n                         delay = common.domDelay[prop];\n                    };\n\n                };\n            };\n\n            return delay;\n        },\n\n        /**\n         * Publicize call.\n         * Returns targeting keywords object\n         *\n         * @public\n         */\n        getGPTCustomParams : function(){\n\n           return { \"aamId\" : CN.cookie.get(\"aam_uuid\"),\n                    \"kw\" : common.gptAdsParams[\"kw\"],\n                    \"ctid\" : common.contentId,\n                    \"cttp\" :common.contentType,\n                    \"rfsh\" : common.dfpRefresh,\n                    \"CAP\" : common.adSeqCap,\n                    \"scl\" : common.socialKey\n\n                };\n\n        },\n\n        /**\n         * Publicize call.\n         * Returns cn.dart parameters object\n         *\n         * @public\n         */\n        getAdLog : function(){\n            var gptAds,\n                moreAds,\n                allAds,\n                renderedAds = {},\n                renderedMoreAds = {},\n                ind = 0,\n                device = common.gptAdSlotSizes[common.device];\n\n            gptAds = CN.dart.getGPTAds();\n            moreAds = CN.dart.getMoreAdsCollection();\n            allAds = $.extend( moreAds ,gptAds);\n\n            function checkObj(val){\n                var retVal;\n\n                if(typeof val === \"undefined\"){\n                    retVal = \"NA\";\n\n                }else{\n                    retVal = val;\n                };\n\n                return retVal;\n            };\n\n            for(; ind<allAds.length; ind++){\n\n                if (allAds[ind].xkws) {\n                    var\n                        xkws            = allAds[ind].xkws,\n                        addSize         = allAds[ind].adsize,\n                        extra           = ( xkws.length > 1 ) ? \"_\"+xkws[1] : \"\",\n                        addSlotArray    = ( xkws.length >= 1) ? device[addSize[0] +\"x\"+ addSize[1] +\"_\"+ xkws[0] + extra] : device[addSize[0] +\"x\"+ addSize[1]];\n                }\n\n               if( jQuery(\"#\" + allAds[ind].adplacement).length === 0){\n                    renderedAds[allAds[ind].adplacement] = {    'adEmpty' : checkObj(common.gptEvent[ind].isEmpty) ,\n                                                                'creativeID' : common.gptEvent[ind].creativeId || 'NA',\n                                                                'linedItem' : common.gptEvent[ind].lineItemId || 'NA',\n                                                                'adSize' : common.gptEvent[ind].size || 'NA',\n                                                                'adSlotArray': addSlotArray,\n                                                                'error' : checkObj(common.gptEvent[ind].isEmpty) ? 'none' : 'DFP ad returned but page div id [' + allAds[ind].adplacement + '] not found'\n\n                                                            };\n\n               }else{\n                    renderedAds[allAds[ind].adplacement] = {    'adEmpty' : checkObj(common.gptEvent[ind].isEmpty) ,\n                                                                'creativeID' : common.gptEvent[ind].creativeId || 'NA',\n                                                                'linedItem' : common.gptEvent[ind].lineItemId || 'NA',\n                                                                'adSize' : common.gptEvent[ind].size || 'NA',\n                                                                'adSlotArray': addSlotArray,\n                                                                'error' : 'none'\n\n                                                            };\n\n               };\n\n\n\n            };\n\n           checkMyDivPlease();\n\n           return { \"site\" : common.site,\n                    \"adLibVersion\" : common.version,\n                    \"useOneAdCall\" : common.useOneAdCall,\n                    \"errors\" : common.errors,\n                    \"ETFTriggered\" : common.triggerEFT,\n                    \"warnings\" : common.warnings,\n                    \"masterAd\" : allAds[0].adplacement,\n                    \"dfpParams\" : {\n                        \"kw\" : common.gptAdsParams[\"kw\"],\n                        \"ctid\" : common.contentId,\n                        \"cttp\" :common.contentType,\n                        \"rfsh\" : common.dfpRefresh,\n                        \"sqt\" : common.adSeqTargeting,\n                        \"CAP\" : common.adSeqCap,\n                        \"scl\" : common.socialKey,\n                        \"pvid\" : common.pvid\n                    },\n                    \"configFileLoaded\" : common.configLoaded,\n                    \"configFileData\" : common.configData,\n                    \"pageAdCalls\" : renderedAds,\n\n\n                };\n\n        },\n\n        getAdLogWin : getAdLogWin,\n\n        /**\n         * Publicize call.\n         * Returns slideshowInterstitialAds {} , helps debugging this ad\n         * @public\n         */\n        getSlideShowAds : function(){\n            return slideshowInterstitialAds;\n        },\n\n        /**\n         * Flush GPT Ads on a single call.\n         * @returns {CN.dart}\n         * @public\n         */\n        renderGPTAds : function(){\n            // Send the ad details(like placeholder name, size, keywords) of the ads to Google\n            googletag.cmd.push(function() {\n                pushGPTAds();\n            });\n\n            displayGPTAds();\n        },\n\n        setGPTAdsRenderStatus : function(status){\n            gptAdsRendered = status;\n        },\n\n        getGPTAdsRenderStatus : function(){\n            return gptAdsRendered;\n        },\n\n        /**\n         * Publicizes refresh dynamic ad\n         * @param  {String}    adname  -- slideshow300x252\n         *                     For single ads that are on overlay pages\n         * @returns {CN.dart}\n         * @public\n         */\n        refreshDynamicAd : function(ad, opts){\n            var slot = CN.dart.getSlideShowAds();\n\n            if(typeof ad === \"string\" && slot !== \"undefined\" && ad === slot.adname){\n\n                if (opts) {\n                    setTargeting( opts );\n                }\n\n                googletag.pubads().refresh([slot.slot]);\n            }\n\n        },\n\n        /**\n         * Publicize timer\n         * @public\n         */\n        timer : timer,\n\n        /**\n         * Publicizes refresh\n         * @param  {String}    ads       Array, CSV or space-delimited list of ads id's\n         * @returns {CN.dart}\n         * @public\n         */\n        refresh : refresh,\n\n        /**\n         * Returns a common object property\n         * @param  {Array}    props       Array of properties to fetch.\n         * @returns {Object}\n         * @public\n         */\n        get : function(props){\n\n            props = [].concat(props);\n            var\n                i = 0,\n                len = props.length,\n                ret = {},\n                prop;\n\n            for (; i < len; i++) {\n                prop = props[i];\n                ret[prop] = (common[prop] || common[prop] === false ? common[prop] : undefined);\n            }\n            return len > 1 ? ret : ret[prop];\n        },\n\n       /**\n         * Returns a common object property\n         * @param  {Array}    props       Array of properties to fetch.\n         * @returns {Object}\n         * @public\n         */\n        getCommon : function(){\n           return common;\n        },\n\n        buildTracking : buildTracking,\n\n        trackETF : trackETF,\n\n        enableETF : enableETF,\n\n        /**\n         * Publicizes init\n         * @param {Object}  pars    Shared params - ex: site, zone, shared kws.\n         * @public\n         */\n        init : init,\n\n        /**\n         * Publicizes ready\n         * @public\n         */\n        ready : ready,\n\n        /**\n         * Allows plug-ins to be installed on CN.dart.plugin\n         * @param {Object}    install    The plug-in to install\n         * @returns {CN.dart}\n         * @public\n         */\n        register : function(install) {\n            var\n                i = 0,\n                len;\n\n            if (!install) {\n                return this;\n            }\n\n            install = [].concat(install);\n            len = install.length;\n\n            for (; i < len; i++) {\n               plugin.register(install[i]);\n            }\n\n            return this;\n        },\n\n        /**\n         * {Object} remote\n         * Publicizes remote object.\n         * @deprecated\n         * @public\n         */\n        remote : remote,\n\n        /**\n         * {Object} test\n         * Publicizes test object.\n         * @public\n         */\n        test : test\n    };\n\n}(jQuery, CN, CN.debug));\n\n\n/**\n * CN.dart.ipad\n * CN.dart plug-in for iPad\n * @author Russell Munson\n * @requires CN, jQuery\n */\nCN.dart.ipad = (function(ua, $CNd, $D) {\n    var\n        suff = \".ipad\",\n\n        init = function(obj){\n            var\n                i = 0,\n                len = plugin.callbacks.length,\n\n                // Pull values from DART config.\n                config = $CNd.get('configData').noiPadToDartSite,\n                mobileSite = $CNd.get('site').split('.').indexOf(\"mobile\"),\n                runPlugin  =  (typeof config === \"undefined\") ? false : (config === true) ? true : false;\n\n            // Short circuit out of function if config.noiPadToDartSite == true.\n            if (runPlugin) {\n                $D.info(plugin.name + \" override .ipad from site\", [{}]);\n                return this;\n            } ;\n\n            // Short circuit out of function for mobify.\n            if (mobileSite === 1) {\n                $D.info(plugin.name + \" mobile site. No .ipad ext added\", [{}]);\n                return this;\n            } ;\n\n            plugin.isFinished = true;\n            jQuery(window).trigger('CN.customEvents.dartPlugin', [plugin, {\n                site : CN.dart.get('site') + suff\n            }]);\n\n            for (; i < len; i++) {\n                plugin.callbacks[i][\"func\"].apply((plugin.callbacks[i][\"scope\"] || null), (plugin.callbacks[i][\"args\"] || []));\n            }\n        },\n\n        plugin = {\n            init       : ua.indexOf('ipad') !== -1 ? init : false,\n            name       : 'CN Ad User Agent Plugin',\n            callbacks  : [],\n            isFinished : ua.indexOf('ipad') === -1\n        };\n\n    return plugin;\n}(navigator.userAgent.toLowerCase(), CN.dart, CN.debug));\n\n/**\n * CN.dart.moatListener\n * @author Robert Sethi\n * @requires CN, jQuery\n */\nCN.dart.moatListener = (function($, $CNd, $D) {\n    var\n        allAds = $CNd.getGPTAds(),\n        common = $CNd.getCommon(),\n        ret = false,\n\n        //Plugin interface method\n        init = function(obj) {\n\n                    // Pull values from DART config.\n        var config = $CNd.get('configData').enableMoatRefresh,\n            runPlugin  =  (typeof config === \"undefined\") ? false : (config === true) ? true : false;\n\n        // Short circuit out of function if config.enableMoatRefresh == false.\n        if (!runPlugin) {\n            $D.info(plugin.name + \" disbabled\", [{}]);\n            return this;\n        } ;\n\n            window.moatCondeListener = function(event){\n\n                for(var ind=0; ind<allAds.length; ind++){\n\n                    if(event.adKeywords.zMoatST === allAds[ind].adname){\n                        var dartSignal = {};\n\n                        allAds[ind].isInView = event.isInView;\n                        allAds[ind].isInteracting = event.isInteracting;\n\n                        dartSignal.adname = allAds[ind].adname;\n                        dartSignal.inView = allAds[ind].isInView;\n                        dartSignal.isInteracting = allAds[ind].isInteracting;\n\n                        $(window).on('CN.customEvents.moatInView', function(event, param){\n                            common.moat_isInteracting = param.isInteracting; }).trigger('CN.customEvents.moatInView', [dartSignal]);\n\n                    }\n\n                }\n\n            };\n        },\n\n        test = function(){\n            setInterval($CNd.refresh, 15000);\n        },\n\n        plugin;\n\n\n    plugin = {\n        // If conditions exist to modify ad common settings, define interface\n        // or return false to skip processing\n        init       : init,\n        name       : 'CN Ad MOAT Listener',\n        callbacks  : [],\n        isFinished : false\n    };\n\n\n    return plugin;\n}(jQuery,CN.dart, CN.debug));\n\n\n/**\n * CN.dart.suppression\n * @author Russell Munson\n * @requires CN, jQuery\n */\nCN.dart.suppression = (function() {\n    var\n        pars = CN.url.params(),\n\n        ret = false,\n\n        //Plugin interface method\n        init = function(obj) {\n            var\n                i = 0,\n                len = plugin.callbacks.length;\n\n            plugin.isFinished = true;\n            jQuery(window).trigger('CN.customEvents.dartPlugin', [plugin, ret]);\n\n            for (; i < len; i++) {\n                plugin.callbacks[i][\"func\"].apply((plugin.callbacks[i][\"scope\"] || null), (plugin.callbacks[i][\"args\"] || []));\n            }\n        },\n\n        plugin;\n\n    // Check for npu param, and toggle dcopt off if present\n    if (pars.npu === '1' || (pars.mbid && pars.mbid.match(/yhoo|google[1-5]?$/))){\n        ret = {\n            dcopt : false\n        };\n    }\n\n    plugin = {\n        // If conditions exist to modify ad common settings, define interface\n        // or return false to skip processing\n        init       : ret ? init : false,\n        name       : 'CN Ad Param-based Modifiers',\n        callbacks  : [],\n        isFinished : !ret\n    };\n\n    return plugin;\n}());\n\nCN.dart.register([CN.dart.ipad,CN.dart.suppression,CN.dart.moatListener]);\n\nCN.dart.inlineConfig = {\"ars\":{\"etfThreshold\":5,\"plugins\":{\"polar\":{\"propertyID\":\"NA-ARSTECH-11236128\",\"secondaryPageUrl\":\"/sponsored-content/\",\"ads\":{\"article\":{\"label\":\"Article\",\"elementId\":\"polar195x130_frame\",\"template\":\"CN.ad.polar.article\",\"location\":\"ol.latest-stories > li:nth-child(3)\",\"infoText\":\"Sponsored\",\"infoButtonText\":\"\"}}}},\"overrides\":{\"gptAdSlotSizes\":{\"728x90_scaleDisplay\":[[728,90],[970,66],[970,90],[970,418],[970,250]],\"970x418_top\":[[1020,250],[970,418],[970,250],[980,300],[970,90],[970,66],[728,92],[88,31],[62,88],[196,31],[1140,380],[900,300],[1020,300],[1020,250]]}},\"slideShowAdsRefresh\":true,\"sponsorParameter\":[\"kw\",\"mvi\"],\"docReferrer\":false,\"refresh\":{\"type\":\"inView\",\"lazyThrottle\":200,\"lazyOffset\":150,\"lazyLoad\":true,\"refreshTimeMsec\":60000,\"inView\":{\"viewableThreshold\":0.5,\"slotSizes\":[\"728x90\",\"728x91\",\"728x92\",\"728x93\",\"300x250\",\"300x251\",\"300x252\",\"300x253\",\"300x254\",\"300x255\",\"300x256\",\"300x600\",\"300x601\",\"300x1050\",\"300x1051\",\"970x70\",\"970x71\",\"970x91\",\"970x92\",\"970x250\",\"970x251\",\"970x252\",\"970x418\",\"970x419\"]}}}};/*global CN, console, window, document, jQuery, */ /* for jsLint */\nif (typeof CN === 'undefined' || !CN) {\n    throw('CN and/or jQuery library is missing!');\n}\n\n/**\n * @class    CN ad\n * @public\n * @memberOf CN\n */\nCN.ad = CN.ad || {};\n\n/**\n * Adobe Audience Manager Plugin\n *\n * @requires    CN.dart\n * @requires    CN\n * @requires    jQuery, cn-fe-ads-1.3.14+\n * @author      Dennis Pierce\n */\nCN.ad.aam = (function($, $CNd, $D) {\n    'use strict';\n    var\n        /**\n         * {Number} LIMIT\n         * The maximum number of characters of the 'u' value\n         * @constant\n         * @private\n         */\n        LIMIT = 294,\n\n        /**\n         * {Number} U_COOKIE\n         * Name of the Adobe did cookie.\n         * @constant\n         * @private\n         */\n        U_COOKIE = 'aam_uuid',\n\n        /**\n         * {Number} KW_COOKIE\n         * Name of the Adobe cookie that returns back a list of keywords that go in an ad.\n         * @constant\n         * @private\n         */\n        KW_COOKIE = 'aamconde',\n\n        /**\n         * {Object} param\n         * The param object installed on common.params.\n         *     pKey    : The key of the param\n         *     pValue  : The default value (static)\n         *     refresh : A function to refresh the value if it depends on something volatile\n         * @public\n         */\n        uParams = {\n            pKey      : 'u',\n            pValue    : null,\n            refresh   : buildUval\n        },\n\n        kwParams = {\n            pKey      : 'aamVals',\n            pValue    : null,\n            refresh   : buildVal,\n            noKey     : true\n        },\n\n\n        /**\n         * Truncates a pipe-delimited parameter value to prevent the request from failing.  If the string is over the required\n         * limit, a 'trunc' value is prefixed.\n         * @param {String}    str    The string to truncate\n         * @returns {String}\n         * @private\n         */\n        truncateStr = function(str) {\n            var\n                pos;\n\n            $D.info(plugin.name + \" limit reached.  Truncating\", [{limit: LIMIT, length: str.length, str: str}]);\n\n            str = ('trunc|' + str).substr(0, LIMIT - 6);\n            pos = str.lastIndexOf('|');\n            return str.substr(0, pos)+';';\n        },\n\n        /**\n         * Assembles the value of the u parameter.  This is dependent on the final state of ad keywords.\n         * @param {Object}    ad    A CN.dart ad object\n         * @returns {Object}\n         * @private\n         */\n        buildUvalYieldex = function(ad) {\n            var\n                uval   = $CNd.get('params')['u'].defaultValue, // Value of the existing u parameter.\n                cookieVal = '',\n                returnObj = {}; // Value of the Adobe Audience manager cookie.\n\n            // Grab the values from the Adobe cookie.\n            cookieVal = CN.cookie.get(U_COOKIE);\n            if (cookieVal !== '' && uval.indexOf(cookieVal) === -1) {\n                uval = cookieVal + '|'  + uval;\n            }\n\n            // No semicolon because we already have Yieldex putting a semicolon on.\n            return ((uval.length <= LIMIT) ? uval : truncateStr(uval));\n        },\n\n        /**\n         * Assembles the value of the u parameter.  This is dependent on the final state of ad keywords.\n         * @param {Object}    ad    A CN.dart ad object\n         * @returns {Object}\n         * @private\n         */\n        buildUval = function(ad) {\n            var uval   = '',\n                cookieVal = '',\n                returnObj = {}; // Value of the Adobe Audience manager cookie.\n\n            // Grab the values from the Adobe cookie.\n            cookieVal = CN.cookie.get(U_COOKIE);\n            if (cookieVal !== '' && uval.indexOf(cookieVal) === -1) {\n                uval = cookieVal + '|'  + uval + ';';\n            }\n\n            // No semicolon because we already have Yieldex putting a semicolon on.\n            return ((uval.length <= LIMIT) ? uval : truncateStr(uval));\n        },\n\n        /**\n         * Assembles the value of the keywords.  This is dependent on the final state of ad keywords.\n         * @param {Object}    ad    A CN.dart ad object\n         * @returns {Object}\n         * @private\n         */\n        buildVal = function(ad) {\n            var cookieVal = '',\n                val = '';\n            // Grab the values from the Adobe cookie.\n            cookieVal = CN.cookie.get(KW_COOKIE);\n            if (cookieVal !== '') {\n                val = cookieVal + ';';\n            }\n            return val;\n        },\n\n        /**\n         * Calls the 2 helper functions to read Adobe cookies and stuff them into ad keywords or u value.\n         * @param {Object}    ad    A CN.dart ad object\n         * @returns {Object}\n         * @private\n         */\n        build = function(ad) {\n            var i,\n                useYieldEx = false;\n            for (i=0; i<plugin.requires.length; i++) {\n                if (plugin.requires[i] === 'CN Ad Yieldex') {\n                    useYieldEx = true;\n                }\n            }\n            // U value function depends on if we have yieldex or not.\n            if (useYieldEx) {\n                uParams.pValue = buildUvalYieldex(ad);\n            } else {\n                uParams.pValue = buildUval(ad);\n            }\n            kwParams.pValue = buildVal(ad);\n            $D.info(plugin.name + \" assembled\", [{uvalue: uParams.pValue, aamskw: kwParams.pValue}]);\n        },\n\n\n        /**\n         * Inspects a plugin object's modifies property against this plugin's own requires property\n         * @param {Object}    plug    The plugin to check against\n         * @returns {Boolean}\n         * @private\n         */\n        requires = function(plug) {\n            var\n                i    = 0,\n                mod  = plug.modifies,\n                req  = plugin.requires,\n                curr = null;\n\n            if (mod && mod.length && req && req.length) {\n\n                for (i=0; i < req.length; i+=1) {\n                    curr = req[i];\n                    if (mod.indexOf(curr) !== -1 || curr === plug.name) {\n                        return true;\n                    }\n                }\n\n            }\n\n            return false;\n        },\n\n        finished = function(ret) {\n            var\n                i = 0,\n                len = plugin.callbacks.length;\n\n            plugin.isFinished = true;\n            $(window).trigger('CN.customEvents.dartPlugin', [plugin, ret]);\n\n            for (i=0; i < len; i+=1) {\n                plugin.callbacks[i][\"func\"].apply((plugin.callbacks[i][\"scope\"] || null), (plugin.callbacks[i][\"args\"] || []));\n            }\n        },\n\n\n        /**\n         * Finds a keyword dependency and installs on its callbacks array.  If no dependency is found\n         * build the param object and finish.\n         * Also calls setAdobeCookie to set the Adobe did cookie.\n         * @param {String}    obj    A reference to CN.dart's plugin object\n         * @private\n         */\n        init  = function(obj) {\n            var\n                plug   = null,\n                queue  = obj.queue,\n                i      = queue.length - 1,\n                run    = function() {\n                    build();\n                    finished({\n                        addparam : [kwParams, uParams]\n                    });\n                };\n\n            for (i=queue.length - 1; i >= 0; i-=1) {\n                plug = queue[i];\n                if ( plug !== plugin && requires(plug)) {\n                    $D.info(plugin.name + \" found dependency: \" + plug.name, [\"Pushing to callbacks array\"]);\n                    if (!plug.isFinished) {\n                        return plug.callbacks.push({\n                            func:  run,\n                            args:  null,\n                            scope: null\n                        });\n                    }\n                }\n            }\n\n            run();\n        },\n\n        /*\n         * Make sure this obj is below the init, otherwise it won't be a valid plugin to the DART library.\n         */\n        plugin = {\n            init       : init,\n            name       : 'CN Ad Adobe Audience Manager',\n            modifies   : ['common.params'],\n            requires   : [],\n            callbacks  : [],\n            isFinished : false\n        },\n        register = function(){\n            $CNd.register(plugin);\n        };\n    register(plugin);\n\n}(jQuery, CN.dart, CN.debug));\n/*global CN, console, window, location, document, jQuery, setTimeout */\n/*jslint plusplus: true */\nif (typeof CN === 'undefined' || !CN) {\n    throw ('CN and/or jQuery library is missing!');\n}\n\n/**\n * @class    CN ad\n * @public\n * @memberOf CN\n * @author   Ars Technica\n */\nCN.ad = CN.ad || {};\n\n/**\n * Ars Accelerator DFP plugin.\n * Extend current kw-set with kws from pulled from Accelerator\n *\n * @requires    CN.dart\n * @requires    CN\n * @requires    jQuery\n * @author      Ars Technica\n */\nCN.ad.arsaccelerator = (function ($, $CNd, $D) {\n    var\n        ready             = false,\n\n        protocol          = location.protocol || 'http:',\n\n        timeout           = 800,\n\n        apiUrl            = '//dff7tx5c2qbxc.cloudfront.net/hot/',\n\n        /**\n         * Grab the JSON from Accelerator app. If request\n         * is successful, register the plugin with CN.dart.\n         * @private\n         */\n        getData = function () {\n            try {\n                var parsely = $('meta[name=\"parsely-page\"]'),\n                canonical = encodeURIComponent($.parseJSON(parsely.attr('content')).link);\n            }\n            catch(err) { // if meta is not present or malformed, let's stop the plugin\n                finished(false);\n                $D.info(plugin.name + ':  plugin disabled - metadata not found.');\n                return false;\n            }\n            $.ajax({\n                url         : protocol + apiUrl + CN.dart.get('site') + '/' + canonical,\n                dataType    : 'script',\n                timeout     : timeout,\n                error       : function (x, t) {\n                    finished(false);\n                    $D.info(plugin.name + ' plugin disabled', ['script ' + t, 'using site code ']);\n                },\n                cache       : true,\n                success     : function (data) {\n                    ready = true;\n                    parse();\n                },\n                complete    : function () {\n                    $D.info(plugin.name + ' Ars Accelerator call complete');\n                }\n            });\n            return true;\n        },\n\n\n        init = function (obj) {\n            CN.ad.arsaccelerator.kws = [];\n            getData();\n\n            // Schedule parse to run in 5 seconds as a failsafe\n            setTimeout(function() {\n                if (!plugin.isFinished && !ready) {\n                    parse();\n                }\n            }, 5000);\n        },\n\n        finished = function (ret) {\n            var\n                i,\n                len = plugin.callbacks.length;\n\n            plugin.isFinished = true;\n            $(window).trigger('CN.customEvents.dartPlugin', [plugin, ret]);\n\n            for (i = 0; i < len; i++) {\n                plugin.callbacks[i][\"func\"].apply((plugin.callbacks[i][\"scope\"] || null), (plugin.callbacks[i][\"args\"] || []));\n            }\n        },\n\n        /**\n         * Parse the Ars Accelerator JSON object, extract usable kws, and\n         * return an ad object with the kws appended for CN.dart validation.\n         * @private\n         */\n        parse = function () {\n            var\n                i,\n                len,\n                kws = CN.ad.arsaccelerator.kws,\n                ret = [];\n\n            if (!kws) {\n                $D.warn(\"Ars Accelerator Request Timed Out\", [\"Setting plugin to finished to proceed to render ads\"]);\n                return finished(false);\n            }\n\n            len = kws.length;\n            for (i = 0; i < len; i++) {\n                ret.push(kws[i]);\n            }\n\n            finished ({\n                ad : {kws : $CNd.get('ad').kws.concat(ret)}\n            });\n        },\n\n        plugin = {\n            init       : init,\n            name       : 'CN Ad Ars Accelerator kws',\n            modifies   : ['keywords'],\n            requires   : [],\n            callbacks  : [],\n            isFinished : false\n        },\n\n        register = function () {\n            $CNd.register(plugin);\n        };\n\n\n    // Register immediately.\n    register();\n\n\n    return {\n        tags : false\n    };\n}(jQuery, CN.dart, CN.debug));\n/*global CN, console, window, alert, location, document, jQuery, setTimeout, clearTimeout, clearInterval, setInterval */ /* for jsLint */\n\nif (typeof CN === 'undefined' || !CN) {\n    throw('CN and/or jQuery library is missing!');\n}\n\n/**\n * @class    CN ad\n * @public\n * @memberOf CN\n * @author   Russell Munson\n */\nCN.ad = CN.ad || {};\n\n/**\n * Singleton to handle topic assertion and dart zone modification\n * setTopicAd:\n * @uses      CN.dart\n * @requires  CN\n * @author    Dennis Pierce\n * @author    Russell Munson\n */\nCN.ad.topics = (function($CN,$CNA) {\n    var cookie = {\n            name:\"cn_adtopic\",\n\n            options : {\n               domain:CN.url.domain(),\n               path:'/'\n            },\n\n            check : function(){\n                return $CN.cookie.get(cookie.name);\n            },\n\n            read : function(){\n                var cook=cookie.check();\n                return cook !==\"\" ?\n                    CN.utils.parseStr(cook,'usercookie') :\n                    false;\n            },\n\n            remove : function(){\n                $CN.cookie.del(cookie.name,cookie.options)\n            },\n\n            write : function(pars){\n                $CN.cookie.set(cookie.name,\"zone=\"+(pars.zone || \"\")\n                    +\"|site=\"+(pars.site || \"\" )\n                    +(pars.ad && pars.ad.kws ? \"|kws=\"+pars.ad.kws.join(','):\"\")\n                ,cookie.options);\n            }\n        },\n\n    setTopic= function(obj){\n        var drop = function(){\n            cookie.write(CN.dart.get(['site','zone','ad']));\n        };\n        if(CN.dart.get('initialized')){\n            drop();\n        } else {\n            jQuery(window).bind('CN.customEvents.dartInitialized',drop);\n        }\n        finished(obj.plugin, {});\n    },\n\n    getTopic= function(obj){\n        var data=cookie.read(),\n            ret={};\n        if(!data) {\n            return false;\n        }\n        ret = {\n            site : data.site,\n            zone : data.zone\n        };\n\n        if(data.kws){\n            ret.ad={kws : data.kws.split(',')};\n        }\n        cookie.remove();\n        finished(obj.plugin, ret);\n    },\n\n    finished = function(plugin, ret) {\n        var\n            i = 0,\n            len = plugin.callbacks.length;\n\n        plugin.isFinished = true;\n        jQuery(window).trigger('CN.customEvents.dartPlugin', [plugin, ret]);\n\n        for (; i < len; i++) {\n            plugin.callbacks[i][\"func\"].apply((plugin.callbacks[i][\"scope\"] || null), (plugin.callbacks[i][\"args\"] || []));\n        }\n    };\n\n    /* PUBLIC METHODS */\n    return {\n        setTopic:setTopic,\n        getTopic:getTopic,\n        plugin : function(store){\n            if(store){\n                return {\n                    init       : setTopic,\n                    name       : \"CN Ad Topics :: Store Cookie\",\n                    callbacks  : [],\n                    isFinished : false\n                };\n            }\n\n            if(cookie.check()){\n                return {\n                    init       : getTopic,\n                    name       : \"CN Ad Topics :: Read Cookie\",\n                    callbacks  : [],\n                    isFinished : false\n                };\n            }\n            return {\n                init: false,\n                name: \"CN Ad Topics :: no action required\"\n            };\n        }\n    };\n\n}(CN,CN.ad));\n\n\n/**\n * Dart Key word string extender plug-in container\n * Extend current kw-set with kws from external content (ex: MT Posts)\n *\n * @uses      CN.dart\n * @author    Russell Munson\n *              should be a comma separated key word list.\n */\nCN.ad.kwExtend = (function($CNd) {\n    var\n        kws = false,\n\n        /**\n         * Plugin init function.\n         * Return the ad modifier object\n         * @private\n         */\n        init = function(obj){\n            finished(obj.plugin,{\n                ad: {\n                    'kws' : ($CNd.get('ad').kws || []).concat(kws)\n                    }\n                });\n        },\n\n        finished = function(plugin, ret) {\n            var\n                i = 0,\n                len = plugin.callbacks.length;\n\n            plugin.isFinished = true;\n            jQuery(window).trigger('CN.customEvents.dartPlugin', [plugin, ret]);\n\n            for (; i < len; i++) {\n                plugin.callbacks[i][\"func\"].apply((plugin.callbacks[i][\"scope\"] || null), (plugin.callbacks[i][\"args\"] || []));\n            }\n        },\n\n        /**\n         * The is the actual plug-in inderface. It builds the\n         * api available to CN.dart after registration has been completed.\n         * @param kws   {string}    kw string to be appened to kw set of an dart ad call. String\n         *                          should be a comma separated key word list.\n         *                          to the ad calls.\n         * @example:\n\n            CN.dart.register(\n                CN.ad.kwExtend.plugin(\"keyword1, keyword2);\n            );\n\n            This builds the interface api:\n                {\n                    init       : init,\n                    name       : 'CN Ad Keyword extension plug-in',\n                    callbacks  : [],\n                    isFinished : false\n                }\n\n            Which is registered with CN.dart and evaluated at run time with the\n            return object:\n                { ad :\n                    {\n                        kws : ['keyword1','keyword2']\n\n                    }\n                }\n         */\n        setKws = function(str){\n            var\n                i = 0;\n\n            if (CN.isString(str)) {\n                kws = str.split(',');\n                // Sanitize the keywords to make sure they don't have spaces or special chars.\n                for (; i < kws.length; i++) {\n                    kws[i] =  CN.utils.trim(CN.utils.transliterate(kws[i])).replace(/\\W/g, '-').toLowerCase();\n                }\n            }\n\n            /**\n             * Plugin init function.\n             * Return the ad modifier object\n             */\n            return {\n                init       : kws && kws.length ? init : false,\n                name       : 'CN Ad Keyword extension plug-in',\n                callbacks  : [],\n                isFinished : kws && kws.length ? false : true\n            };\n        };\n\n    return {\n        // Public method for setKws\n        plugin  : setKws\n    };\n\n\n\n}(CN.dart));/*global CN, console, window, location, document, jQuery, setTimeout */ /* for jsLint */\nif (typeof CN === 'undefined' || !CN) {\n    throw('CN and/or jQuery library is missing!');\n}\n\n/**\n * @class    CN ad\n * @version  2.0.2\n * @public\n * @memberOf CN\n * @author   Robert Sethi\n */\nCN.ad = CN.ad || {};\n\n/**\n * NATIVEADS needs to be global\n *\n */\nwindow.NATIVEADS = window.NATIVEADS || {};\nwindow.NATIVEADS.injectedAt = new Date().getTime();\n\n\n(function(d, s, id) {\n  var js, fjs = d.getElementsByTagName(s)[0];\n  if (d.getElementById(id)) {return;}\n  js = d.createElement(s);\n  js.id = id; js.type = \"text/javascript\"; js.async = true;\n  js.src = \"http://plugin.mediavoice.com/plugin.js\";\n  fjs.parentNode.insertBefore(js, fjs);\n})(document, \"script\", \"nativeads-plugin\");\n\n\n/**\n * Polar DFP plugin.\n *\n * @requires    CN.dart\n * @requires    CN\n * @requires    jQuery\n * @author      Robert Sethi\n */\nCN.ad.polar = (function($, $CNd, $D) {\n\n    var\n        ready                = false,\n        configError          = false,\n        propertyID           = '',           //Polar brand id\n        secondaryPageUrl     = '',           //secondary page html\n        config               = undefined,   //grab from cnads server,\n        localConfig          = false,\n        enablePolarLogging   = false,\n        disablePolarTracker  = false ,      //Disable Polar Analytics tracking,\n        $noop                = $.noop,\n\n\n        /**\n         * Allow overrides to be passed in via cn.dartconfig.js\n         * @private\n         */\n        setDefaults = function(ad) {\n           // Pull values from DART config.\n            if(typeof ($CNd.get('configData').plugins) !== \"undefined\"){\n              if(typeof ($CNd.get('configData').plugins.polar) !== \"undefined\"){\n               config = $CNd.get('configData').plugins.polar;\n               $D.info(plugin.name + \" using cnads config \", [config]);\n              } else {\n                $D.info(plugin.name + \" cnads config not defined \", [{}]);\n              }\n            }\n\n          //See if site has a local CN.ad.polar.config declared and override dartConfig\n            if(typeof CN.ad.polar.config !== \"undefined\"){\n               config = CN.ad.polar.config;\n               localConfig = true;\n               $D.info(plugin.name + \" config override to site config \", [CN.ad.polar.config]);\n            }\n\n            //Older config file - don't run plugin\n            if(typeof config === \"undefined\"){\n                $D.info(plugin.name + \" config file is too old \", [{}]);\n                $D.info(plugin.name + \" plugin not supported \", [{}]);\n\n                configError = true;\n                return this;\n            };\n\n            propertyID = config.propertyID || false;\n            secondaryPageUrl = config.secondaryPageUrl || false;\n            enablePolarLogging = (typeof config.enablePolarLogging === \"undefined\") ? false : true;\n            disablePolarTracker = (typeof config.disablePolarTracker === \"undefined\") ? false : true;\n\n            if(!propertyID || !secondaryPageUrl){\n              $D.info(plugin.name + \" missing propertyID \", [{}]);\n              configError = true;\n              return false;\n            };\n\n            msgPre = 'CN Ad: Polar configured';\n\n        },\n\n        /**\n         *\n         * @param {String} obj A reference to CN.dart's plugin object\n         * @private\n         */\n        init = function(obj) {\n            var run = function() {\n                    build();\n                    finished({});\n                };\n\n            run();\n        },\n\n        injectPolar = function(){\n\n                window.NATIVEADS.onReady = function(ads) {\n\n                  var dateFormatter = function(date) {\n                    if ((typeof(date.toLocaleDateString) === \"function\") &&\n                        (typeof(date.toLocaleTimeString) === \"function\")) {\n                      return date.toLocaleDateString() + \" @ \" + date.toLocaleTimeString();\n                    } else {\n                      return date.toString();\n                    }\n                  };\n\n                  if(disablePolarTracker){\n                    ads.disablePolarTracker();\n                  };\n\n                  ads.setPropertyID(propertyID);\n                  ads.setSecondaryPageURL(secondaryPageUrl);\n\n                  if(enablePolarLogging){\n                    ads.logging.enable();\n                  };\n\n                  var insert = function(obj) {\n\n                    ads.insertPreview({\n                      dateFormat :   dateFormatter,\n                      label      :   obj.adLabel,\n                      infoText   :   obj.infoText,\n                      infoButtonText  : obj.infoButtonText,\n                      unit       : {server: \"dfp-gpt\", elementID: obj.elementID},\n                      location   : obj.location,\n                      template   : obj.compiledTemplate,\n                      onRender   : obj.onRender,\n                      onFill     : obj.onFill,\n                      onError    : obj.onError\n                    });\n                  };\n\n\n                    ads.configureSecondaryPage({\n                      binding: {\n                        sponsor: {\n                          link: '#polar-sponsor-link',\n                          logo: '#polar-sponsor-logo',\n                          name: '#polar-sponsor-name'\n                        },\n                        title: '#polar-title',\n                        summary: '#polar-summary',\n                        content: '#polar-content',\n                        author: '#polar-author',\n                        pubDate: '#polar-pubDate',\n                        image: {\n                          href: '#polar-href',\n                          caption: '#polar-caption',\n                          credits: '#polar-credits'\n                        }\n                      },\n\n                      onFill: (typeof window[\"CN\"].ad.polar.secondaryPage !== \"undefined\") ? ( (typeof window[\"CN\"].ad.polar.secondaryPage.onFill !== \"undefined\") ? window[\"CN\"].ad.polar.secondaryPage.onFill : false ) :  false || $noop,\n                      onRender: (typeof window[\"CN\"].ad.polar.secondaryPage !== \"undefined\") ? ( (typeof window[\"CN\"].ad.polar.secondaryPage.onRender !== \"undefined\") ? window[\"CN\"].ad.polar.secondaryPage.onRender : false ) :  false || $noop,\n                      onError: (typeof window[\"CN\"].ad.polar.secondaryPage !== \"undefined\") ? ( (typeof window[\"CN\"].ad.polar.secondaryPage.onError !== \"undefined\") ? window[\"CN\"].ad.polar.secondaryPage.onError : false ) :  false || $noop\n\n                    });\n\n\n                 //Create placeholder for each Polar ad\n                  for(prop in config.ads){\n                      var tmpl = config.ads[prop].template.split(\".\").pop(),\n                          polarLocation = (typeof config.ads[prop].location === \"undefined\") ? \"#\"+config.ads[prop].elementID+\"_polarAd\" : config.ads[prop].location;\n\n                        insert({ elementID         : config.ads[prop].elementId,\n                                 adLabel           : config.ads[prop].label,\n                                 infoText          : config.ads[prop].infoText,\n                                 infoButtonText    : config.ads[prop].infoButtonText,\n                                 location          : polarLocation,\n\n                                compiledTemplate  : (typeof window[\"CN\"].ad.polar[tmpl] !== \"undefined\") ? window[\"CN\"].ad.polar[tmpl] : false || $noop,\n                                onFill: (typeof window[\"CN\"].ad.polar[tmpl] !== \"undefined\") ? ( (typeof window[\"CN\"].ad.polar[tmpl].onFill !== \"undefined\") ? window[\"CN\"].ad.polar[tmpl].onFill : false ) :  false || $noop,\n                                onRender: (typeof window[\"CN\"].ad.polar[tmpl] !== \"undefined\") ? ( (typeof window[\"CN\"].ad.polar[tmpl].onRender !== \"undefined\") ? window[\"CN\"].ad.polar[tmpl].onRender : false ) :  false || $noop,\n                                onError: (typeof window[\"CN\"].ad.polar[tmpl] !== \"undefined\") ? ( (typeof window[\"CN\"].ad.polar[tmpl].onError !== \"undefined\") ? window[\"CN\"].ad.polar[tmpl].onError : false ) :  false || $noop\n\n                            });\n\n                  };\n                };\n\n\n        },\n\n        /**\n         * Initializes the plugin with config values\n         *\n         */\n        build = function() {\n            setDefaults();\n            if(!configError){\n              injectPolar();\n            };\n            $D.info(plugin.name + \" assembled\", [{}]);\n\n      },\n\n\n\n        finished = function(ret) {\n            var\n                i = 0,\n                len = plugin.callbacks.length;\n\n            plugin.isFinished = true;\n            $(window).trigger('CN.customEvents.dartPlugin', [plugin, ret]);\n\n            for (; i < len; i++) {\n                plugin.callbacks[i][\"func\"].apply((plugin.callbacks[i][\"scope\"] || null), (plugin.callbacks[i][\"args\"] || []));\n            }\n        },\n\n\n        plugin = {\n            init       : init,\n            name       : 'CN Ad Polar',\n            modifies   : [],\n            requires   : [],\n            callbacks  : [],\n            isFinished : false\n        },\n\n        register = function(){\n            $CNd.register(plugin);\n        };\n\n    // Register immediately.\n    register(plugin);\n\n    return {};\n\n}(jQuery, CN.dart, CN.debug));\n/*global CN, console, window, location, document, jQuery, setTimeout */\n/*jslint plusplus: true, sub:true */\n\nif (typeof CN === 'undefined' || !CN) {\n    throw ('CN and/or jQuery library is missing!');\n}\n\n/**\n* @class    CN ad\n* @public\n* @memberOf CN - 3\n* @author  Ads Team\n*/\nCN.ad = CN.ad || {};\n\n\n/**\n* Proximic DFP plugin.\n* Extend current kw-set with kws pulled from Proximic\n*\n* @requires    CN.dart\n* @requires    CN\n* @requires    jQuery\n* @author      Ads Team\n*/\nCN.ad.proximic = (function ($, $CNd, $D) {\n    'use strict';\n\n    var\n        ready           = false,\n        ret             = [],\n\n\n        init = function (obj) {\n            $CNd.timer.mark('ProximicInit');\n            parse();\n\n        },\n\n        finished = function (ret) {\n            var\n                i,\n                len = plugin.callbacks.length;\n\n            plugin.isFinished = true;\n            $(window).trigger('CN.customEvents.dartPlugin', [plugin, ret]);\n\n            for (i = 0; i < len; i++) {\n                plugin.callbacks[i]['func'].apply((plugin.callbacks[i]['scope'] || null), (plugin.callbacks[i]['args'] || []));\n            }\n        },\n\n        addKws = function(){\n            var\n                i,\n                len,\n                pxData = CN.ad.proximic.pxData;\n\n            if(typeof pxData !== \"undefined\"){\n                if(typeof pxData.data !== \"undefined\"){\n                     len = pxData.data.length;\n                }\n            }\n\n\n            if( typeof len !== \"undefined\" ){\n\n                for (i = 0; i < len; i++) {\n                    ret.push(pxData.data[i]);\n                }\n             return true;\n\n            }\n\n            return false;\n\n        },\n\n        /**\n        * Parse the Proximic JSON object, extract usable kws, and\n        * return an ad object with the kws appended for CN.dart validation.\n        * @private\n        */\n        parse = function () {\n\n            var pxData = CN.ad.proximic.pxData;\n\n            if( typeof pxData === \"undefined\" ) {\n\n                $CNd.timer.mark('ProximicDataNotReadyTryAgain');\n\n                setTimeout(function(){\n                    $CNd.timer.mark('ProximicSecondTry');\n                    appendKws();\n                }, 800);\n\n                return;\n            }\n\n            if( typeof pxData.data !== \"undefined\"){\n                appendKws();\n            }else{\n                $CNd.timer.mark('ProximicReturnedError999999');\n                return;\n            }\n\n\n        },\n\n        appendKws = function(){\n\n            if (addKws()) {\n                $CNd.timer.mark('ProximicSuccess');\n\n                finished ({\n                    ad : {kws : $CNd.get('ad').kws.concat(ret)}\n                });\n            }else{\n                $CNd.timer.mark('ProximicReturnedError999999');\n                return;\n            }\n\n\n        },\n\n        plugin = {\n            init      : init,\n            name      : 'CN Ad Proximic',\n            modifies  : ['common.params'],\n            requires  : [],\n            callbacks  : [],\n            isFinished : false\n        },\n\n        register = function () {\n            $CNd.register(plugin);\n        };\n\n    $CNd.timer.mark('ProximicLoaded');\n    // Register immediately.\n    register();\n    $CNd.timer.mark('ProximicRegistered');\n\n    return {\n        tags : false\n    };\n}(jQuery, CN.dart, CN.debug));/*global CN, console, window, location, document, jQuery, setTimeout */ /* for jsLint */\n/**\n * @class    CN ad viewableRefresh\n * @public\n * @memberOf CN\n * @author   Dennis Pierce\n */\n\nCN.ad = CN.ad || {};\n\n/**\n * Refresh GPT plugin.\n * No extending of keywords. Just refeshes the ad positions if the position is\n * in the viewport.\n *\n * @requires    CN.dart\n * @requires    CN\n * @requires    jQuery\n * @author      Dennis Pierce\n */\nCN.ad.viewableRefresh = (function($, $CNd, $D) {\n    'use strict';\n    var\n        refreshRate, // how many milliseconds before refreshing the ads.\n\n        returnRefreshDelay = 0, // Set the time to restart refresh when window in focus - can be overidden in config\n\n        threshold = 0.5, // percentage of the ad that must be viewable to be considered in viewport - can be overidden in config\n\n        config, // grab from cnad server,\n\n        common, // CN ad common object\n\n        poll, // sensible lazy load scrolling\n\n        lazyThrottle = 250, //delay scroll events - can be overidden in config\n\n        lazyOffset = 0, //option allows how far below the viewport to begin loading - can be overidden in config\n\n        zoneEnabled = false, // default site refresh\n\n        cleanZone, // Grabs zone for zoned based refresh\n\n        configTooOld = false,  //make sure we have the refresh {}\n\n        msgPre = '', // Re-used string for logging info messages.\n\n        callback = function(){}, // callback - initialized to a no-op so that no validations on it's presence need to be made\n\n        // For active refresh, ignore these ad slots.\n        activeIgnoreSlots = ['1x1','1x2'],\n\n        timesFired = 0, // Counter to track how many times this has fired. Stop it after freq cap is reached.\n\n        win = window, // Caching window obj.\n\n        docElem = document.documentElement, // caching, same as above.\n\n        hiddenEvent, // Var to store different browser's implementation of visibility API event name,\n\n        adPlacements = [], //array of ad placements\n\n        lazyAdPlacements = [], // array of ads for lazy load\n\n        timerId = '', // interval id to start and stop refresh timers.\n\n        firstTimeDelay = 5000, // Fudge factor to delay starting timer after 5 seconds. This plugin will load immediately\n                            // so we don't want the timer to start until after first batch of ads have loaded.\n        stopClock,\n        startClock,\n        /**\n         * The following functions have been taken from response.js with a small modification.\n         * http://responsejs.com/\n         * They are used to get the dimensions of a div in the viewport.\n         * I modified to also pass back the height and width of the bounding rect and if the rect\n         * is 0 width and height, I return false for in viewport. Otherwise, I would be getting positives\n         * for ads with display:none.\n         * Also changed is the threshold parameter. This is a percentage of how much of the ad should be\n         * visible.\n         * @private\n         */\n        rectangle = function(el, threshold, height, width) {\n            // Local handler for area methods:\n            // adapted from github.com/ryanve/dime\n            // The native object is read-only so we\n            // have use a copy in order to modify it.\n            var buffer = 1, // Want to give a little buffer when calculating the threshold.\n                r = el.getBoundingClientRect ? el.getBoundingClientRect() : {},\n                t = typeof threshold === 'number' ? threshold || 1 : 1,\n                h = (r.height * t) || height,\n                w = (r.width * t) || width;\n\n            return {\n              top: (r.top || 0) + (h-buffer),\n              left: (r.left || 0) + (w-buffer),\n              bottom: (r.bottom || 0) - (h+buffer),\n              right: (r.right || 0) - (w+buffer),\n              height: (r.height || height),\n              width: (r.width || width)\n            };\n        },\n\n        /**\n         * Width of the viewport.\n         * @private\n         */\n        viewportW = function() {\n            var a = docElem['clientWidth'], b = win['innerWidth'];\n            return a < b ? b : a;\n        },\n\n        /**\n         * Height of the viewport.\n         * @private\n         */\n        viewportH = function() {\n            var a = docElem['clientHeight'], b = win['innerHeight'];\n            return a < b ? b : a;\n        },\n\n        /**\n         * Determines if the element is in the viewport and also applies a threshold to determine\n         * what percentage of the element is in the viewport. Most of this was from response.js, but\n         * we added the check if the element is 0 height/width to return false.\n         * NOTE: Passing height and width along because IE8 is stupid and when you call getBoundingClientRect it doesn't\n         * return height and width.\n         * @private\n         */\n        inViewport = function(elem, threshold, h, w) {\n            var r = rectangle(elem, threshold, h, w);\n            return !!r && (r.height > 0 && r.width > 0) && r.bottom >= 0 && r.top <= viewportH() && r.right >= 0 && r.left <= viewportW();\n        },\n\n        inViewportFirstLoad = function(elem) {\n            var coords = elem.getBoundingClientRect();\n            return ((coords.top >= 0 && coords.left >= 0 && coords.top) <= (window.innerHeight || document.documentElement.clientHeight) + lazyOffset);\n\n        },\n        /**\n         * Allow overrides to be passed in via cn.dartconfig.js\n         * @private\n         */\n        setDefaults = function() {\n            // Pull values from DART config.\n            config = $CNd.get('configData').refresh;\n            common = $CNd.getCommon();\n\n            //Older config file - don't run plugin\n            if(typeof config === 'undefined'){\n                $D.info(plugin.name + ' config file is too old ', [{}]);\n                $D.info(plugin.name + ' plugin not supported ', [{}]);\n                configTooOld = true;\n                return this;\n            }\n\n            msgPre = 'CN Ad: ' + config.type + ' Refresh ';\n\n            refreshRate = getRefreshTime();\n            returnRefreshDelay = ( config.returnRefreshDelay && typeof config.returnRefreshDelay !== 'undefined') ? config.returnRefreshDelay : returnRefreshDelay;\n            firstTimeDelay = ( config.firstTimeDelay && typeof config.firstTimeDelay !== 'undefined') ? config.firstTimeDelay : firstTimeDelay;\n            lazyOffset = ( config.lazyOffset && typeof config.lazyOffset !== 'undefined') ? config.lazyOffset : lazyOffset;\n            lazyThrottle = ( config.lazyThrottle && typeof config.lazyThrottle !== 'undefined') ? config.lazyThrottle : lazyThrottle;\n\n            if( config.inView && typeof config.inView !== 'undefined') {\n              threshold = ( config.inView.viewableThreshold && typeof config.inView.viewableThreshold !== 'undefined') ? config.inView.viewableThreshold : threshold;\n            }\n        },\n\n\n        /**\n         * Grabs refreshRate from config\n         * If config overrides is present then refresh by zones is enabled\n         * and we can have different refreshRates\n         *\n         * @private\n         */\n        getRefreshTime = function() {\n            var refreshTime = config.refreshTimeMsec;\n\n            //Overriding the zone refresh\n            if (typeof config.overrides !== 'undefined' ){\n                if (typeof config.overrides.refresh !== 'undefined' ){\n                    if (typeof config.overrides.refresh.zone !== 'undefined' ){\n                        cleanZone = common.zone.replace(/[^\\w\\s]/gi, '');\n\n                        for( var prop in config.overrides.refresh.zone){\n                           //If zones match then override refresh time\n                           if (cleanZone === prop ){\n                                refreshTime = config.overrides.refresh.zone[prop].dartRefreshTimeMsec;\n                                zoneEnabled = true;\n                           }\n                        }\n                    }\n                }\n            }\n\n            if (refreshTime && refreshTime > 0){\n\n                $D.info(plugin.name + ' initialized to ' + refreshTime + 'ms', []);\n\n                if(zoneEnabled){\n                    $D.info(plugin.name + ' enabled by zone ' , []);\n                }\n            }\n\n            return refreshTime;\n        },\n        //refreshes ads, resets to refreshRate interval if onFocusOverride is set\n        refreshInt = function( onFocusOverride ) {\n            var refreshTime;\n\n            refreshAds();\n\n            if (onFocusOverride && typeof onFocusOverride !== 'undefined') {\n              clearInterval(timerId);\n              refreshTime = refreshRate;\n              onFocusOverride = 0;\n                timerId = setInterval( function() {\n                  refreshInt( onFocusOverride )\n                } , refreshTime );\n            }\n        },\n        /**\n         * Starts the timer if we don't already have one running.\n         * @public\n         */\n        startTimer = function( onFocusOverride ) {\n\n          var refreshTime = ( onFocusOverride ) ? onFocusOverride : refreshRate;\n\n          if (!timerId) {\n            // We have timed refresh\n            if (refreshRate > 0) {\n\n              if(config.lazyLoad === true){\n\n                //lazyLoad\n                timerId = setInterval( function() {\n                  refreshInt( onFocusOverride )\n                }, refreshTime );\n              } else {\n\n                //no lazyload\n                timerId = setInterval( function() {\n                  refreshInt( onFocusOverride )\n                }, refreshTime );\n              }\n            // just load ads for lazy load no refresh\n            } else if (refreshRate === 0 && config.lazyLoad === true) {\n\n              lazyPoll();\n            }\n         }\n\n          return this;\n        },\n      /**\n       * Credit goes to echo.js library. Tweaked logic to work with ads library\n       * lazyPoll Loop through the ads if present\n       * or remove all event listeners\n       * @private\n       */\n        lazyPoll = function(){\n            var length = lazyAdPlacements.length;\n\n            if (length > 0) {\n                for (var i = 0; i < length; i++) {\n                    var self = lazyAdPlacements[i];\n                    if (self && inViewportFirstLoad($('#'+self.adplacement).get(0)) && !self.lazyDisplay  ) {\n\n                      $CNd.refresh(self.adname,{\"lazyload\" : self.adname});\n                      $D.info(plugin.name + ' lazy load', [self.adname]);\n\n                      callback(self);\n                      lazyAdPlacements.splice(i, 1);\n                      length = lazyAdPlacements.length;\n                      i--;\n                    }\n                  }\n                } else {\n\n                    $(win).off('scroll', handleScroll);\n\n                    if (!document.removeEventListener) {\n                       document.detachEvent('onscroll', handleScroll);\n                    }\n\n                    clearTimeout(poll);\n                }\n\n        },\n\n        /**\n         * Stops the timer and clears out the timerId.\n         * @public\n         */\n        stopTimer = function() {\n            stopClock = (new Date()).getTime();\n            clearInterval(timerId);\n            timerId = false;\n            return this;\n        },\n\n        /**\n         * Event handler for when the tab goes in and out of focus.\n         * @private\n         */\n        handleVisibilityChange = function() {\n            if (document[hiddenEvent]) {\n                stopTimer();\n            } else {\n                startTimer();\n            }\n\n            return false;\n        },\n\n        handleScroll = function(){\n            clearTimeout(poll);\n\n            poll = setTimeout(lazyPoll, lazyThrottle);\n\n        },\n\n        /**\n         * Binds cross-browser events for visibility changes. Taken mostly from Mozilla docs.\n         * @see https://developer.mozilla.org/en-US/docs/Web/Guide/User_experience/Using_the_Page_Visibility_API\n         * For good measure also binds to window focus/blur to stop and start the timer.\n         * @private\n         */\n        bindVisibilityEvents = function() {\n\n            var visibilityChange;\n\n            if (typeof document.hidden !== 'undefined') { // Opera 12.10 and Firefox 18 and later support\n              hiddenEvent = 'hidden';\n              visibilityChange = 'visibilitychange';\n            } else if (typeof document.mozHidden !== 'undefined') {\n              hiddenEvent = 'mozHidden';\n              visibilityChange = 'mozvisibilitychange';\n            } else if (typeof document.msHidden !== 'undefined') {\n              hiddenEvent = 'msHidden';\n              visibilityChange = 'msvisibilitychange';\n            } else if (typeof document.webkitHidden !== 'undefined') {\n              hiddenEvent = 'webkitHidden';\n              visibilityChange = 'webkitvisibilitychange';\n            }\n\n            // Bind\n            if (typeof document.addEventListener !== 'undefined' && typeof hiddenEvent !== 'undefined') {\n                $(document).on(visibilityChange, handleVisibilityChange);\n            }\n\n\n            $(win).on('focus', function() {\n              var delay = 0,\n                timeLapsed,\n                timeRemaining;\n\n              if (stopClock || returnRefreshDelay) {\n\n                //check for time that window was out of focus, delay equals balance of refreshtime remaining\n                if (stopClock) {\n                  timeLapsed = stopClock - startClock;\n                  timeRemaining = refreshRate - timeLapsed;\n                  delay = timeRemaining;\n                }\n\n                //Overrides timeRemaining if returnRefreshDelay is set\n                if (returnRefreshDelay) {\n                  delay = returnRefreshDelay;\n                }\n              }\n\n              startTimer( delay );\n            });\n\n            //Lazy load enabled\n            if ( (typeof config.lazyLoad !== 'undefined') && (config.lazyLoad) ){\n\n                $(win).on('scroll', handleScroll);\n                $(win).on('load', handleScroll);\n            }\n\n            // ie workaround\n            if (document.addEventListener) {\n                $(win).on('blur', function() {\n                    stopTimer();\n                });\n            } else {\n                // Not modern style, but if you are using IE8, you get garbage code.\n                // credit: http://stackoverflow.com/questions/13575216/how-to-tell-when-the-ie8-window-loses-focus\n                document.onfocusout = function(e){\n                    if (e === undefined){ //ie\n                        var evt = event;//ie uses event\n                        if(evt.toElement === null){//check where focus was lost to\n                            stopTimer();\n                        }\n                    }\n                };\n\n                document.attachEvent('onscroll', handleScroll);\n                document.attachEvent('onload', handleScroll);\n            }\n\n\n        // Here's the list of ads we'll loop through on each interval of the refresh\n        // timer.\n        adPlacements = getPlacements();\n\n        $D.info(plugin.name + ' initialized to refesh after ' + returnRefreshDelay + 'ms on focus', []);\n\n        },\n\n        /**\n         * Gets a list of ad placements based on the list of approved sizes in config.\n         * @private\n         */\n        getPlacements = function() {\n            var i,\n                ads = $CNd.getGPTAds(),\n                sz,\n                allowedSizes,\n                allowedPlacements = [];\n\n            for (i=0; i<ads.length; i++) {\n                sz = ads[i].adsize[0] + 'x' + ads[i].adsize[1];\n\n                // TODO: Kind of messy, but if type is inView then\n                // only add ads in the allowedPlacements array.\n                // Active refresh is the opposite, add all placements\n                // except the ones in activeIgnoreSlots.\n                if (config.type === 'inView') {\n                    allowedSizes = config.inView.slotSizes;\n\n                    if ( allowedSizes && allowedSizes.length ) {\n                        if (allowedSizes.indexOf(sz) !== -1) {\n                            allowedPlacements.push(ads[i]);\n                            lazyAdPlacements.push(ads[i]);\n                        }\n                    } else {\n                        allowedPlacements.push(ads[i]);\n                        lazyAdPlacements.push(ads[i]);\n                    }\n                } else {\n                    if (activeIgnoreSlots.indexOf(sz) === -1) {\n                        allowedPlacements.push(ads[i]);\n                        lazyAdPlacements.push(ads[i]);\n                    }\n                }\n            }\n\n            return allowedPlacements;\n        },\n\n        /**\n         * Plugin function to get all of the functionality going. Grabs the ad placements and stores for\n         * later use. Binds the events and times after DOM ready.\n         * @private\n         */\n        build = function(ad) {\n            setDefaults(ad);\n\n            if(!configTooOld){\n                if (config.type === 'inView' || config.type === 'active') {\n\n                    // Bind the timer to DOM ready event and also delay a little bit to make sure ads are rendered.\n                    // TODO: When GPT provides an ads rendered event, we can bind to that instead.\n\n                        $(function() {\n                            bindVisibilityEvents(); // Used to turn off and on the timer when tab is active/inactive.\n                            setTimeout(function() {\n                                startTimer();\n                            }, firstTimeDelay);\n\n                        });\n                }\n\n                $D.info(plugin.name + ' assembled', [{}]);\n            }\n        },\n\n        /**\n         * An extra visibility check to see if the window is visible before refreshing ads.\n         * Why do we need this when we already bind to blur and visibility API events? One, the user\n         * could have blurred the window before the blur event was bound.\n         * Two, for some reason it seems like the blur event doesn't fire. Maybe other scripts are\n         * overwriting the blur events?\n         */\n        isWinVisible = function() {\n            // Check using HTML5 visibility API if available.\n            if (typeof hiddenEvent !== 'undefined') {\n                // Visibility API says document is hidden, so return false.\n                if (document[hiddenEvent] === true) {\n                    return false;\n                }\n            }\n\n            // Check if the document has focus. Chrome < 30 always returns true for hasFocus.\n            if (typeof document.hasFocus !== 'undefined' && document.hasFocus()) {\n                return true;\n            } else {\n                return false;\n            }\n\n            // Final catch. Should never get here, but just in case.\n            return false;\n        },\n\n\n        /**\n         * Loops through ad placements, checks if they are in the viewport, and if they are\n         * refreshes them via CN.dart.refresh.\n         * @returns this\n         * @private\n         */\n        refreshAds = function() {\n            var i,\n                refreshPlacements = [];\n\n            startClock = (new Date()).getTime();\n\n            // Short circuit out of function if we detect window is not visible.\n            if (!isWinVisible()) {\n                return this;\n            }\n\n            //Max Refreshed\n            if (common.configData.maxRefreshes && typeof common.configData.maxRefreshes !== \"undefined\" ){\n                if ( (common.configData.maxRefreshes === timesFired) || (timesFired > common.configData.maxRefreshes)){\n                    stopTimer();\n                    $D.info(plugin.name + 'Max refreshes reached. Stopping refresh', []);\n                    return this;\n                }\n            }\n\n            //check to make sure that adPlacments has a value\n            if (adPlacements.length === 0 ) {\n              adPlacements = getPlacements();\n            }\n\n            for (i=0; i<adPlacements.length; i+=1) {\n                // Active refresh doesn't check inViewport. It refreshes all placements.\n                if (config.type === 'active') {\n                    refreshPlacements.push(adPlacements[i].adname);\n                } else {\n                    if (inViewport($('#'+adPlacements[i].adplacement).get(0), threshold, adPlacements[i].adsize[1], adPlacements[i].adsize[0])) {\n                        refreshPlacements.push(adPlacements[i].adname);\n                    }\n                }\n            }\n\n            $D.info(plugin.name + ' refreshing placements', [refreshPlacements]);\n            // Now we've flagged all placement for refresh, do it if we have placements.\n            if (refreshPlacements.length > 0) {\n                $CNd.refresh(refreshPlacements);\n            }\n\n            timesFired += 1;\n\n            return this;\n        },\n\n        /**\n         * Standard DART plugin to fire event when plugin is finished building.\n         * @private\n         */\n        finished = function(ret) {\n            var i = 0,\n                len = plugin.callbacks.length;\n\n            plugin.isFinished = true;\n            $(window).trigger('CN.customEvents.dartPlugin', [plugin, ret]);\n\n            for (i = 0; i < len; i += 1) {\n                plugin.callbacks[i]['func'].apply((plugin.callbacks[i]['scope'] || null), (plugin.callbacks[i]['args'] || []));\n            }\n        },\n\n        /**\n         *\n         * @param {String} obj A reference to CN.dart's plugin object\n         * @private\n         */\n        init = function(obj) {\n            startClock = (new Date()).getTime();\n            var run = function() {\n                    build();\n                    finished({});\n                };\n\n            run();\n        },\n\n        /*\n         * Make sure this obj is below the init, otherwise it won't be a valid plugin to the DART library.\n         */\n        plugin = {\n            init: init,\n            name: 'CN Ad Refresh',\n            modifies: [],\n            requires: [],\n            callbacks: [],\n            isFinished: false\n        },\n\n        register = function() {\n            $CNd.register(plugin);\n        };\n\n    register(plugin);\n\n    return {\n        refresh : refreshAds,\n        start : startTimer,\n        stop : stopTimer,\n        isWinVisible : isWinVisible,\n        inViewportFirstLoad :  inViewportFirstLoad\n    };\n\n}(jQuery, CN.dart, CN.debug));"]}