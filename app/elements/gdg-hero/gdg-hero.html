<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../gdg-animation-globals/gdg-animation-globals.html">

<polymer-element name="gdg-hero" attributes="">
  <template>
    <link rel="stylesheet" href="gdg-hero.css">

    <gdg-animation-globals values="{{animGlobals}}"></gdg-animation-globals>

    <div class="hero-container" id="heroContainer">
      <div class="logo-container">

        <div class="chevron-container">
          <div class="chevron left"></div>

          <div class="logo-text-container">
            <div class="logo-text">
              <p class="title">GDG DevFest</p> <!-- Hidden at first -->
              <p class="year">2016</p>
            </div>
          </div>

          <div class="chevron right"></div>
        </div>

      </div>

      <p class="description">Saturday, March 23, 2016 @ 8am - 5pm</p>
    </div>


  </template>
  <script>
    (function (Polymer, undefined) {

      function animateHero(elem) {

        var logoEntranceDuration = elem.animGlobals.BASE_DURATION * 0.8,
          heroContainer = elem.$.heroContainer,
          logoContainer = heroContainer.querySelector('.logo-container'),
          heroDescription = heroContainer.querySelector('.description'),
          chevrons = heroContainer.querySelectorAll('.chevron-container .chevron'),
          logoYear = heroContainer.querySelector('.logo-text .year'),
          logoTitle = heroContainer.querySelector('.logo-text .title');


        var timeline = new TimelineMax({
            delay: 1.0
          }
        );

        var entrances = [];

        entrances.push(TweenMax.to(
          chevrons,
          logoEntranceDuration,
          {
            transform: 'scale(1)',
            opacity: 1,
            ease: Back.easeOut.config(1)
          }
        ));

        entrances.push(TweenMax.to(
          logoYear,
          logoEntranceDuration,
          {
            fontSize: '1em',
            opacity: 1,
            display: 'block',
            ease: Back.easeOut.config(1)
          }
        ));

        timeline.add(entrances);


        /////////// Expand Text //////////

        timeline.add(TweenMax.to(
          logoTitle,
          elem.animGlobals.BASE_DURATION,
          {
            display: 'block',
            opacity: 1,
            fontSize: '1em',
            ease: Back.easeOut.config(1.7)
          }
        ));

        timeline.add(TweenMax.to(
          heroDescription,
          logoEntranceDuration,
          {
            fontSize: '1em',
            opacity: 1
          },
          '+=0.5'
        ));

      }

      Polymer('gdg-hero', {

        ready: function () {
          animateHero(this);  // wrap hero animation in RAF -- the closure of "this" being the Polymer element
        }

      });
    }(Polymer));
  </script>
</polymer-element>
