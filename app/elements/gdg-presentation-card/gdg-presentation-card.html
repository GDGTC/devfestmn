<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/core-icon-button/core-icon-button.html">

<link rel="import" href="../gdg-presentation-details/gdg-presentation-details.html">
<link rel="import" href="../../../bower_components/firebase-element/firebase-element.html">

<polymer-element name="gdg-presentation-card" attributes="presentationId sessionId featured">
  <template>
    <link rel="stylesheet" href="gdg-presentation-card.css">

    <firebase-element id="fbPresentation"
                      location="https://devfestmn.firebaseio.com/presentations/{{sessionId}}/{{presentationId}}"
                      data="{{presentation}}">
    </firebase-element>


    <section id="content">

      <!-- Absolutely positioned elements -->
      <core-icon-button
        id="favicon"
        icon="favorite"
        on-tap="{{favoriteTapped}}">

        <span class="btn-label favorites">
          {{presentation.favoriteCount || 0}}
        </span>

      </core-icon-button>


      <!--
      <a class="details-button" href="{{'#/presentations/' + presentationId }}">
        <paper-button>
          READ MORE
        </paper-button>
      </a>
      -->

      <section class="card-footer" flex>
        <content select="section.card-footer"></content>
      </section>
      <!-- / Absolutely positioned elements -->


      <!-- Main Content -->

      <div layout vertical>

        <section class="card-header" layout horizontal center>
          <content select="section.card-header"></content>
        </section>

        <section class="card-body">
          <content select="section.card-body"></content>
        </section>


      </div>


      <content></content>
    </section>

  </template>
  <script>
    (function () {
      Polymer({

        publish: {
          favorited: {
            value: false,
            reflect: true
          },
          favoriteCount: {
            value: 0,
            reflect: true
          }
        },

//        expandDetails: function () {
//          window.location = '#/presentations/' + this.presentationId;
//        },

        favoriteTapped: function (event /*detail, sender*/) {
          event.stopPropagation();
          //this.favorited = !this.favorited;

          this.fire('favorite-tapped');
        },

        ready: function () {
        }
      });
    })();
  </script>
</polymer-element>
