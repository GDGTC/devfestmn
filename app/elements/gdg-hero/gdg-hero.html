<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../gdg-animation-globals/gdg-animation-globals.html">

<polymer-element name="gdg-hero" attributes="">
  <template>
    <link rel="stylesheet" href="gdg-hero.css">

    <gdg-animation-globals values="{{animGlobals}}"></gdg-animation-globals>

    <div class="hero-container" id="heroContainer">
      <div class="logo-container">

        <div class="chevron-container">
          <img src="../../images/gdg_chevron_left.svg" onerror="this.src='../../images/gdg_chevron_left.png">

          <div class="logo-text-container">
            <div class="logo-text">
              <span class="title">GDG DevFest</span> <!-- Hidden at first -->
              <span class="year">2016</span>
            </div>
          </div>

          <img src="../../images/gdg_chevron_right.svg">
        </div>

      </div>

      <p class="description">Saturday, March 23, 2016 @ 8am - 5pm</p>
    </div>


  </template>
  <script>
    (function (Polymer, undefined) {

      function animateHero(elem) {

        var logoEntranceDuration = elem.animGlobals.BASE_DURATION * 0.8,
          heroContainer = elem.$.heroContainer,
          logoContainer = heroContainer.querySelector('.logo-container'),
          heroDescription = heroContainer.querySelector('.description'),
          chevrons = heroContainer.querySelectorAll('.chevron-container img'),
          logoYear = heroContainer.querySelector('.logo-text .year'),
          logoTitle = heroContainer.querySelector('.logo-text .title');


        var timeline = new TimelineMax();
        //timeline.delay(0.5);

        timeline.to(logoContainer, 0, { opacity: 1 });

        timeline.from(
          chevrons,
          logoEntranceDuration,
          {
            scale: 0,
            opacity: 0,
            ease: Back.easeOut.config(1)
          }
        );

        timeline.fromTo(
          logoYear,
          logoEntranceDuration,
          {
            fontSize: '0px',
            opacity: 0,
            display: 'block'
          },
          {
            fontSize: '1em',
            opacity: 1,
            ease: Back.easeOut.config(1)
          },
          '-=' + logoEntranceDuration
        );

        /////////// Expand Text //////////

        timeline.fromTo(
          logoTitle,
          elem.animGlobals.BASE_DURATION,
          {
            fontSize: '0px',
            opacity: 0,
            display: 'none'
          },
          {
            display: 'block',
            opacity: 1,
            fontSize: '1em',
            ease: Back.easeOut.config(1.7)
          }
        );

        timeline.to(
          heroDescription,
          logoEntranceDuration,
          {
            fontSize: '1em',
            opacity: 1
          },
          '+=0.5'
        );
      }

      Polymer('gdg-hero', {

        _animateHero: function (elem) {
          window.requestAnimationFrame(function () {
            animateHero(elem);
          });
        },

        ready: function () {
          animateHero(this);  // wrap hero animation in RAF -- the closure of "this" being the Polymer element
        }

      });
    }(Polymer));
  </script>
</polymer-element>
